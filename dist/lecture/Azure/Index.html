<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<title>Название лекции</title>
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Maks Hladki">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="../../css/bundle.min.css">
	<!--[if lt IE 9]>
		<script src="../../js/html5shiv.min.js"></script>
	<![endif]-->
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<section>
					<h1>Название лекции</h1>
					<h3>Разработка динамичесих веб приложений</h3>
					<p>
						<small>Гладкий Максим Валерьевич / <a href="https://github.com/MaksHladki">github:MaksHladki</a></small>
					</p>
				</section>
				<section>
					<h2>Содержание лекции</h2>
					<nav id="presentable-toc" class="table-content"></nav>
				</section>
			</section>
			<section>
				<h1>Архитектура Windows Azure</h1>
			</section>
			<section>
				<section>
					<h2>Эволюция Windows Azure</h2>
					<ul>
						<li>2006 - создана «команда мечты» для разработки облачной ОС RedDog</li>
						<li>2006 - команда Indigo (известная как Windows Communication Foundation) приступает к работе над экспериментальным реле
							коммуникации
						</li>
						<li>2006 - команда SQL берет на себя разработку интернет-версии своей службы</li>
						<li>2007 - три команды начинают сотрудничать друг с другом</li>
						<li>2008 - объединение команд в проект Azure: службы .NET, онлайн-службы, службы SQL. Предствлена Azure CTP</li>
					</ul>
				</section>
				<section>
					<h2>Следующий этап эволюции</h2>
					<ul>
						<li>2009 - выходит версия CTP 3, подержка доверенного и платформенного кода, геолокация, fast CGI, PHP и Java SDK. Azure
							становится открытой платформой, выпускается первый официальный SDK 1.0</li>
						<li>2010 - платформа доступка в 21 стране, реализована поддержка БД более 50 ГБ, полноценная поддержка IIS и службы удаленного
							рабочего стола</li>
						<li>2011 - инструмент SQL Azure Reporting, Scheduler SDK для поддержки ресурсоемких параллельных приложений</li>
						<li>2012 - добавлена архитектура IaaS, выпущен Python SDK. ЦОДы работают в 8 регионах мира</li>
						<li>2013 - добавлена служба Active Directory</li>
					</ul>
				</section>
			</section>
			<section>
				<h2>Windows Azure</h2>
				<blockquote>
					Windows Azure — это открытая и гибкая облачная платформа, позволяющая бы- стро создавать, развертывать и управлять приложениями
					в глобальной сети центров обработки данных под управлением Майкрософт. Приложения можно разрабатывать с помощью любого
					языка, инструмента или платформы. Кроме того, приложения в общедоступном облаке можно интегрировать с имеющейся ИТ-средой.
				</blockquote>
			</section>
			<section>
				<h2>Основные особенности</h2>
				<ul>
					<li>Открытая - поддерживаются многие ЯП и интсрументы</li>
					<li>Гибкая - разнообразие облачных служб (от утилит развертывания до SQL-хранилищ)</li>
					<li>Под управлением Майкрософт - ЦОДы в США, Европе и Азии</li>
					<li>Совместимая - многие компоненты легко интегрирутся с Windows Server</li>
					<li>Собственная сеть CDN</li>
				</ul>
			</section>
			<section>
				<h2>Основные возмоности</h2>
				<ul>
					<li>Инфраструктура</li>
					<li>Мобильные приложения</li>
					<li>Интернет</li>
					<li>Медиаконтент</li>
					<li>Интеграция</li>
					<li>Идентификация и управление доступом</li>
					<li>Большие данные</li>
					<li>Разработка и тестирование</li>
					<li>Хранение, архивация и восстановление</li>
					<li>Управление данными</li>
				</ul>
			</section>
			<section>
				<h2>Три ОС в одной концепции</h2>
				<ul>
					<li>Windows Server - платформа корпоративного уровня, фундаметр облачных вычислений</li>
					<li>System Center - интегрированная платформа для централизованного управления частными, размещенными и общедоступными облаками</li>
					<li>Windows Azure — открытая, гибкая облачная платформа для разработки, развертывания и управления приложениями и задачами,
						размещенными в глобальной сети центров обработки данных Майкрософ</li>
				</ul>
			</section>
			<section>
				<h1>Вычислительные службы Windows Azure</h1>
			</section>
			<section>
				<h2>Типы приложений</h2>
				<p>С точки зрения пользователей</p>
				<ul>
					<li>Внутренние (on-premises app) - выполняются на компьютере пользователя</li>
					<li>Облачные - выполняются в среде Windows Azure в ЦОД</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Службы Windows Azure</h2>
					<ul>
						<li>Вычислительные службы - предоставляют компьютерные ресурсы, на которых работают облачные приложения</li>
						<li>Сетевые службы - предоставляют облачные приложения и центрам обработки данных пользователям различными способами</li>
						<li>Службы обработки данных - способы хранения, управления, защиты и анализа бизнес-данные,составление отчетов по ним</li>
						<li>Службы приложений - улучшают производительность, защиту и уровень интеграции облачных приложений, а также делают более
							простым процесс их освоения</li>
					</ul>
				</section>
				<section>
					<h3>Вычислительные службы</h3>
					<table>
						<tbody>
							<tr>
								<td>Виртуальные машины</td>
								<td>универсальная среда для создания, развертывания и управления виртуальными машинами</td>
							</tr>
							<tr>
								<td>Веб-сайты</td>
								<td>специализированная среда для создания и управления веб-сайтами, а также переноса существующих</td>
							</tr>
							<tr>
								<td>Облачные службы</td>
								<td>создание и развертывание масшатабируемое ПО любой сложности на любом ЯП</td>
							</tr>
							<tr>
								<td>Мобильные службы</td>
								<td>технологии обработки и хранения данных для мобильных систем</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Сетевые службы</h3>
					<table>
						<tbody>
							<tr>
								<td>Виртуальная сеть</td>
								<td>позволяет использовать облако в качестве расширения локального ЦОДа</td>
							</tr>
							<tr>
								<td>Диспетчер трафика</td>
								<td>масшатбирование трафика по определнным критериям: максимальная производительность, циклическое обслуживание и уровень
									отказоустойчивости
								</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Службы обработки данных</h3>
					<table>
						<tbody>
							<tr>
								<td>Управление данными</td>
								<td>хранение и управление данными в ВМ + MSQL, БД Azure SQL, NoSQL решениях через REST API, blob-хранилищах</td>
							</tr>
							<tr>
								<td>Бизнес-аналитика</td>
								<td>предоставляет службы SQL Server Reporting and Analysis, SharePoint Serve, Azure SQL Reporting, Azure Marketplace
									и HDInsight</td>
							</tr>
							<tr>
								<td>HDInsight</td>
								<td>специальная надстройка, позволяющая запускать Apache Hadoop в облаке Azure</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Службы обработки данных</h3>
					<table>
						<tbody>
							<tr>
								<td>Кэш</td>
								<td>распределенные решение для кэширования, ускоряющее работу облачных приложений и снижающее нагрузку на БД
								</td>
							</tr>
							<tr>
								<td>Резервное копирование</td>
								<td>средства автономной защититы данных на сервере, позволяют создавать как автоматические, так и ручные копии</td>
							</tr>
							<tr>
								<td>Диспетчер восстановления</td>
								<td>защита критически важных для бизнеса данных, приложений и служб в платформе виртуализации Hyper-V. Координация репликаций
									и восстановление частных облаков
								</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Службы приложений</h3>
					<table>
						<tbody>
							<tr>
								<td>Мультимедийные службы</td>
								<td>формируют процессы для создания, управления и распространения медиаконтента</td>
							</tr>
							<tr>
								<td>Обмен сообщениями</td>
								<td>шина обслуживания и очередь обеспечивают связь приложений в частном и/или общедоступном облаке</td>
							</tr>
							<tr>
								<td>Узлы уведомлений</td>
								<td>хорошо масштабируемая кросс-платформенная инфраструктура push-уведомлений для приложений, работающих на мобильных
									устройствах
								</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Службы приложений</h3>
					<table>
						<tbody>
							<tr>
								<td>Службы BizTalk</td>
								<td>функции B2B (Business-to-Business) и EAI (Enterprise Application Integration) для облачных и гибридных решений по
									интеграции
								</td>
							</tr>
							<tr>
								<td>Active Directory</td>
								<td>отвечает за управление идентификацией и контроль доступа для облачных приложений</td>
							</tr>
							<tr>
								<td>Многофакторная аутентификация</td>
								<td>дополнительный уровень аутентификации наряду с учетными данными пользователей, повышая защищенность доступа к локальным
									и облачным приложениям
								</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Общая схема</h3>
					<img src="img/service-scheme.png" alt="" height="550">
				</section>
			</section>
			<section>
				<section>
					<h2>Веб-сайты</h2>
				</section>
				<section>
					<h3>Определение от Microsoft</h3>
					<blockquote>
						Веб-сайты Windows Azure — это масштабируемая, безопасная и гибкая плат- форма, на основе которой можно создавать веб-приложения
						для бизнеса, рас- ширять охват бренда и привлекать новых клиентов
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>портал самообслуживания с галереей наиболее популярных веб-решений</li>
						<li>интсрумент WebMatrix</li>
						<li>интсрумент публикации приложений</li>
						<li>Azure SDK для Visual Studio</li>
						<li>утилиты для создания, конфигурирования и управления БД</li>
						<li>интеграция с системами контроля версий: TFS, GitHub, Bitbucket и т.д.</li>
						<li>инструмент мониторинга нагрузки и состояния ресурсов веб-приложения</li>
						<li>утилиты диагностики и тесторования</li>
						<li>конфигурация SSL-стерификатоф</li>
						<li>конфигурация версии платформы (.NET, PHP, Java и т.д)</li>
					</ul>
				</section>
				<section>
					<h3>Режимы работы веб-сайтов</h3>
					<!-- автомасштабирование -->
					<ul>
						<li>бесплатный - мультиарендная архитектура, каждому сайту выделена квота на ресурсы процессора, памяти и сети. Количество
							сайтов зависит от тарифного плана, SLA отсутствует</li>
						<li>распределенный - гарантируется SLA более низкого уровня по сравнению со стандартным режимом</li>
						<li>стандартный - можно выбрать сайты, которые будут работать на спе- циально выделенной виртуальной машине, где могут
							размещаться до 500 веб- сайтов
						</li>
					</ul>
				</section>
				<section>
					<h3>Доступность серверов</h3>
					<ul>
						<li>малый сервер (1 ядро, 1,75 ГБ оперативной памяти)</li>
						<li>средний сервер (2 ядра, 3,5 ГБ оперативной памяти)</li>
						<li>большой сервер (4 ядра, 7 ГБ оперативной памяти)</li>
					</ul>
				</section>
				<section>
					<h3>автомасштабирование</h3>
					<img src="img/auto_scale.jpg" alt="">
					<p>https://msdn.microsoft.com/ru-ru/library/hh680945(v=pandp.50).aspx</p>
				</section>
			</section>
			<section>
				<h2>Балансировка нагрузки</h2>
				<p>https://docs.microsoft.com/ru-ru/azure/application-gateway/application-gateway-introduction</p>
			</section>
			<section>
				<section>
					<h2>Виртуальные машины</h2>
				</section>
				<section>
					<h3>Определение от microsoft</h3>
					<blockquote>
						Виртуальные машины Windows Azure — это масштабируемая IaaS-платформа по запросу, позволяющая быстро подготавливать и развертывать
						в облаке сервер- ные задачи.
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>механизмы настройки, контроля и отслеживания ВМ</li>
						<li>балансировщик нагрузки между ВМ</li>
						<li>интсрумент подключения к другим облачным службам Windows Azure, на которых работают веб-роли и рабочие роли</li>
						<li>можно копировть виртуальные жесткие диски (Virtual Hard Disk, VHD) из локальной среды в Azure и на их основе создать
							новые виртуальные машины</li>
						<li>Возможно и обратное действие — выгрузить VHD из Windows Azure и запустить их локально в центре обработки данных</li>
						<li>Новые виртуальные машины можно создавать из стандартных образов, доступ- ных в галерее Windows Azure. В число стандартных
							образов входят актуальные версии Windows Server, различные сборки Linux, а также Microsoft SharePoint, Microsoft SQL
							Server и предустановленный Microsoft BizTalk Server в составе Windows Server</li>
						<li>вы можете использовать для развертывания новых виртуальных машин и собственные сборки, которые были созданы локально</li>
					</ul>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li> будет полный контроль над своими виртуальными машинами, развернутыми в облаке Windows Azure. </li>
						<li>Виртуальными машинами на базе Windows Server можно удаленно управлять по протоколу RDP (Remote Desktop Protocol) </li>
						<li>управлять средствами Windows PowerShell</li>
						<li> Виртуальные машины Linux поддерживают удаленное управление по SSH (Secure Shell)</li>
						<li>Вы также мо- жете создавать и подключать к виртуальным машинам диски для хранения ин- формации приложений</li>
						<li> Если необходимо повысить производительность виртуальных машин для ресурсоемких задач, можно выделить дополнительные
							процессорные ядра</li>
						<li>со- храняются и самостоятельно восстанавливаются после аппаратных сбоев</li>
						<li>Любые подключенные к вирту- альной машине диски также сохраняются, они резервированы BLOB-объектами хранилища Windows
							Azure. Между тем, экземпляры веб-ролей и рабочих ролей самовосстанавливаются, но не сохраняются</li>
						<li>Использование виртуальных машин тарифицируется по часам, поэтому для эко- номии средств вы можете просто отключить
							ненужные машины. </li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Основные компоненты</h2>
					<uL>
						<li>Fabric - интерфей - обеспечивает средства управления облачной платформой</li>
						<li>Compute - вычисления, обрабатывает пользовательские данные</li>
						<li>Storage - память, сервис хранения пользовательских данных</li>
						<li>Config - конфигурация</li>
						<li></li>
					</uL>
					<blockquote>
						Все компоненты являются сервисами .NET
					</blockquote>
				</section>
				<section>
					<h3>Сервис Compute</h3>
					<ul>
						<li>Решает задачи совместного выполнения огромного числа пользовательских приложений</li>
						<li>Может выполнять каждый экземпляр приложения на отдельной виртуальной машине </li>
						<li>Основная проблема - масштабирование</li>
						<li></li>
						<li></li>
						<li></li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Облачные службы</h2>
				</section>
				<section>
					<blockquote>
						С помощью облачных служб Windows Azure можно быстро создавать, развер- тывать многоуровневые приложения в облаке и управлять
						ими. Используя облачные службы, вы можете сконцентрироваться на разработке, те- стировании, развертывании и управлении
						приложением, а не тратить время на обслуживание нижележащей инфраструктуры
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Для распреде- ленной обработки и гибкого масштабирования приложения можно назначить ему несколько ролей</li>
						<li> Приложения облачных служб можно создать практически на любой популярной платформе разработки, включая .NET, Node.js,
							PHP, Java, Python и Ruby.</li>
						<li> Кроме того, в облачное приложение можно интегрировать мо- бильные службы Windows Azure и мультимедийные службы.</li>
						<li>На портале управления Windows Azure можно отслеживать работоспособность и доступность приложений в облачных службах</li>
						<li> Можно также настроить оповеще- ния в реальном времени о сбоях в работе служб или снижении их производитель- ности
						</li>
						<li>А с помощью новой функции автомасштабирования ваше приложение бу- дет автоматически получать или отдавать ресурсы по
							мере необходимости. Это удешевит обслуживание приложений в облаке, так как оплата будет взиматься только за фактически
							использованные ресурсы</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Сетевые службы Windows Azure</h2>
				</section>
				<section>
				</section>
			</section>
			<section>
				<h1>Application Insights</h1>
			</section>
			<section>
				<h2>Интерфейс ITelemetry</h2>
				<pre>
						<code class="hljs">
public interface ITelemetry
{
    //  Контекст связанный с текущей телеметрией
    TelemetryContext Context { get; }

    // Отслеживания абсолютного порядка телеметрий. Состоит из двух частей: 
    // постоянный идентификатор для текущего сеанса 
    // и идентификатор для каждого события добавляется в очередь (инкрементален)
    string Sequence { get; set; }

    //  Время записи данных телеметрии
    DateTimeOffset Timestamp { get; set; }

    //  Проверяет наличие потенциально опасных (или не валидных) данных 
    void Sanitize();
}
						</code>
					</pre>
			</section>
			<section>
				<h2>
					Класс TelemetryContext
				</h2>
				<pre>
					<code class="hljs">
public sealed class TelemetryContext
{
    public TelemetryContext();
    public CloudContext Cloud { get; }
    public ComponentContext Component { get; }
    public DeviceContext Device { get; }
    public string InstrumentationKey { get; set; }
    public LocationContext Location { get; }
    public OperationContext Operation { get; }
    public IDictionary&lt;string, string&gt; Properties { get; }
    public SessionContext Session { get; }
    public UserContext User { get; }
}
					</code>
				</pre>
			</section>
			<section>
				<h2>Класс TelemetryConfiguration</h2>
				<pre>
					<code class="hljs">
public sealed class TelemetryConfiguration : IDisposable
{
    public TelemetryConfiguration();
    public static TelemetryConfiguration Active { get; }
    public bool DisableTelemetry { get; set; }
    public string InstrumentationKey { get; set; }
    public ITelemetryChannel TelemetryChannel { get; set; }
    public IList&lt;ITelemetryInitializer&gt; TelemetryInitializers { get; }
    public TelemetryProcessorChainBuilder TelemetryProcessorChainBuilder { get; }
    public ReadOnlyCollection&lt;ITelemetryProcessor&gt; TelemetryProcessors { get; }
    public static TelemetryConfiguration CreateDefault();
    public static TelemetryConfiguration CreateFromConfiguration(string config);
    public void Dispose();
}
					</code>
				</pre>
			</section>
			<section>
				<h2>Класс TelemetryClient</h2>
				<pre>
					<code class="hljs" data-trim>
public sealed class TelemetryClient
{
    public TelemetryClient();
    public TelemetryClient(TelemetryConfiguration configuration);
    public TelemetryContext Context { get; }
    public string InstrumentationKey { get; set; }
    public void Flush();
    public void Initialize(ITelemetry telemetry);
    public bool IsEnabled();
    public void Track(ITelemetry telemetry);
    public void TrackAvailability(AvailabilityTelemetry telemetry);
    public void TrackAvailability(string name, DateTimeOffset timeStamp, TimeSpan duration, string runLocation, bool success, string message = null);
    public void TrackEvent(EventTelemetry telemetry);
    public void TrackEvent(string eventName, IDictionary&lt;string, string&gt; properties = null, IDictionary&lt;string, double&gt; metrics = null);
    public void TrackException(ExceptionTelemetry telemetry);
    public void TrackException(Exception exception, IDictionary&lt;string, string&gt; properties = null, IDictionary&lt;string, double&gt; metrics = null);
    public void TrackMetric(MetricTelemetry telemetry);
    public void TrackMetric(string name, double value, IDictionary&lt;string, string&gt; properties = null);
    public void TrackPageView(string name);
    public void TrackPageView(PageViewTelemetry telemetry);
    public void TrackRequest(RequestTelemetry request);
    public void TrackRequest(string name, DateTimeOffset startTime, TimeSpan duration, string responseCode, bool success);
    public void TrackTrace(TraceTelemetry telemetry);
    public void TrackTrace(string message);
    public void TrackTrace(string message, IDictionary&lt;string, string&gt; properties);
    public void TrackTrace(string message, SeverityLevel severityLevel);
    public void TrackTrace(string message, SeverityLevel severityLevel, IDictionary&lt;string, string&gt; properties);
}
					</code>
				</pre>
			</section>
			<section>
				<section>
					<h2>Основные методы класса TelemetryClient</h2>
				</section>
				<section>
					<h3>Метод TrackTrace</h3>
					<blockquote>
						Используется для диагностики проблемных мест (анализ и диагностический поиск) приложения. Может использловаться как "обертка"
						для системы логирования
					</blockquote>
					<pre>
						<code class="hljs" data-trim>
public void TrackTrace(string message);
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
public void TrackTrace(string message, IDictionary&lt;string, string&gt; properties);
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
public void TrackTrace(string message, SeverityLevel severityLevel);
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
public void TrackTrace(
    string message, 
    SeverityLevel severityLevel, 
    IDictionary&lt;string, string&gt; properties
);
						</code>
					</pre>
					<pre>
						<code class="hljs" data-trim>
public void TrackTrace(TraceTelemetry telemetry);
						</code>
					</pre>
				</section>
				<section>
					<h3>SeverityLevel</h3>
					<pre>
						<code class="hljs">
public enum SeverityLevel
{
    Verbose = 0,
    Information = 1,
    Warning = 2,
    Error = 3,
    Critical = 4
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Класс TraceTelemetry</h3>
					<blockquote>
						Используется для логирования данных. Оперирует сообщением, временем активации и дополнительными параметрами
					</blockquote>
					<pre>
						<code class="hljs">
public sealed class TraceTelemetry : 
    ITelemetry, ISupportProperties, ISupportSampling
{
    public TraceTelemetry();
    public TraceTelemetry(string message);
    public TraceTelemetry(string message, SeverityLevel severityLevel);
    public TelemetryContext Context { get; }
    public string Message { get; set; }
    public IDictionary&lt;string, string&gt; Properties { get; }
    public string Sequence { get; set; }
    public SeverityLevel? SeverityLevel { get; set; }
    public DateTimeOffset Timestamp { get; set; }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод TrackPageView</h3>
					<blockquote>
						логирует название страницы (web, mobile, desktop)-приложения, с которой пользователь работает в данный момент
					</blockquote>
					<pre>
						<code class="hljs">
public void TrackPageView(string name);
						</code>
					</pre>
					<pre>
						<code class="hljs">
public void TrackPageView(PageViewTelemetry telemetry);
						</code>
					</pre>
				</section>
				<section>
					<h3>Класс PageViewTelemetry</h3>
					<blockquote>
						отслеживание посещаймости страниц пользователями
					</blockquote>
					<pre>
						<code class="hljs" data-trim>
public sealed class PageViewTelemetry : 
    ITelemetry, ISupportProperties, ISupportSampling
{
    public PageViewTelemetry();
    public PageViewTelemetry(string pageName);
    public TelemetryContext Context { get; }
    //  Длительность посещения страницы
    public TimeSpan Duration { get; set; }
    //  Пользовательские метрики
    public IDictionary&lt;string, double&gt; Metrics { get; }
	// Имя страницы
    public string Name { get; set; }
    // Словарь для дополнительных параметров
    public IDictionary&lt;string, string&gt; Properties { get; }
    public string Sequence { get; set; }
    // Время, когда событие произошло
    public DateTimeOffset Timestamp { get; set; }
    // URL-страницы
    public Uri Url { get; set; }
}
						</code>
					</pre>
				</section>
				<section>
					<h2>Метод TrackEvent</h2>
					<blockquote>
						Позволяет логировать вызовы событий в приложении для определения частотности выбора пользователем определенной функции, цели
						и т.д.
					</blockquote>
					<pre>
						<code class="hljs">
public void TrackEvent(EventTelemetry telemetry);
						</code>
					</pre>
					<pre>
						<code class="hljs">
public void TrackEvent(
    string eventName, 
    IDictionary&lt;string, string&gt; properties = null, 
    IDictionary&lt;string, double&gt; metrics = null
);
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод TrackRequest</h3>
					<blockquote>
						Применяется для логирования или имитации выполнения HTTP-запросов в приложении
					</blockquote>
					<pre>
						<code class="hljs">
public void TrackRequest(RequestTelemetry request);
						</code>
					</pre>
					<pre>
						<code class="hljs">
// name: имя запроса или путь
// startTime: время инициализации запроса
// duration: продолжительность выполнения
// responseCode: status code
// success: True, если обработан успешно
public void TrackRequest(
    string name, 
    DateTimeOffset startTime, 
    TimeSpan duration, 
    string responseCode, 
    bool success
);				
						</code>
					</pre>
				</section>
				<section>
					<h3>Класс RequestTelemetry</h3>
					<blockquote>
						Инкапсулирует информацию о HTTP-запросах в приложении
					</blockquote>
					<pre>
						<code class="hljs" data-trim>
public sealed class RequestTelemetry : 
    OperationTelemetry, ITelemetry, ISupportProperties, ISupportSampling
{
    public RequestTelemetry();
    public RequestTelemetry(string name, DateTimeOffset startTime, 
	   TimeSpan duration, string responseCode, bool success);
    public override TelemetryContext Context { get; }
    public override TimeSpan Duration { get; set; }
    public string HttpMethod { get; set; }
    // Идентификатор запроса
    public override string Id { get; set; }
    public IDictionary&lt;string, double&gt; Metrics { get; }
    //  Имя человека, выполнявшего запрос
    public override string Name { get; set; }
    public override IDictionary&lt;string, string&gt; Properties { get; }
    public string ResponseCode { get; set; }
    public override string Sequence { get; set; }
    // Идентифицирует субъект, обычно записывается хеш
    public string Source { get; set; }
    public override bool? Success { get; set; }
    public override DateTimeOffset Timestamp { get; set; }
    public Uri Url { get; set; }
}
						</code>
					</pre>
				</section>
				<section>
					<h2>Метод TrackMetric</h2>
					<blockquote>
						Используется для отправки метрик, которые не привязаны к конкретным событиям. Метрики отображаются в виде статистических
						графиков, но в отличие от событий, можно выполнить диагностический поиск по отдельным значениям
					</blockquote>
					<pre>
						<code class="hljs">
public void TrackMetric(
    string name, // имя метрики
    double value, // значение метрики
    IDictionary&lt;string, string&gt; properties = null
    // дополнительные свойства для классификации и фильтрации
);
						</code>
					</pre>
					<pre>
						<code class="hljs">
public void TrackMetric(MetricTelemetry telemetry);
						</code>
					</pre>
				</section>
				<section>
					<h3>Класс MetricTelemetry</h3>
					<blockquote>
						Инкапсулирует логику отслеживания метрик
					</blockquote>
					<pre>
						<code class="hlsj" data-trim>
public sealed class MetricTelemetry : 
    ITelemetry, ISupportProperties
{
    public MetricTelemetry();
    public MetricTelemetry(string metricName, double metricValue);
    public TelemetryContext Context { get; }
    //  количество элементов
    public int? Count { get; set; }
    //  максимальное значение для метрики
    public double? Max { get; set; }
    // минимальное значение для метрики
    public double? Min { get; set; }
    public string Name { get; set; }
    public IDictionary&lt;string, string&gt; Properties { get; }
    public string Sequence { get; set; }
    //  Стандартное отклонение для значения метрики
    public double? StandardDeviation { get; set; }
    public DateTimeOffset Timestamp { get; set; }
	// Значение метрики
    public double Value { get; set; }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Метод TrackException</h3>
					<blockquote>
						Логирует отловленные исключения. Используется для подсчета показателя частоты возникновения проблем. Включает в отчеты результат
						стека вызова функций
					</blockquote>
					<pre>
						<code class="hljs">
public void TrackException(
    Exception exception, 
    IDictionary&lt;string, string&gt; properties = null, 
    IDictionary&lt;string, double&gt; metrics = null
);
						</code>
					</pre>
					<pre>
						<code class="hljs">
public void TrackException(ExceptionTelemetry telemetry);
						</code>
					</pre>
				</section>
				<section>
					<h3>Класс ExceptionTelemetry</h3>
					<blockquote>
						Инкапсулирует логику логирования искулючительных ситуаций
					</blockquote>
					<pre>
						<code class="hljs">
public sealed class ExceptionTelemetry : 
    ITelemetry, ISupportProperties, ISupportSampling
{
    public ExceptionTelemetry();
    public ExceptionTelemetry(Exception exception);
    public TelemetryContext Context { get; }
    public Exception Exception { get; set; }
	// Информация о месте обработки и отлова исключения
    public ExceptionHandledAt HandledAt { get; set; }
    public string Message { get; set; }
    public IDictionary&lt;string, double&gt; Metrics { get; }
    public IDictionary&lt;string, string&gt; Properties { get; }
    public string Sequence { get; set; }
    public SeverityLevel? SeverityLevel { get; set; }
    public DateTimeOffset Timestamp { get; set; }
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Простой пример</h2>
				</section>
				<section>
					<h3>Nuget-пакет</h3>
					<img src="img/IN_nuget.png" alt="">
				</section>
				<section>
					<h3>Какой-то класс (псевдокод)</h3>
					<pre>
							<code class="hljs" data-trim>
public class ApplicationInsight
{
    private static readonly Lazy<ApplicationInsight> _instance;

    private readonly TelemetryClient _tc;

    private ApplicationInsight()

    public static ApplicationInsight Instance {get;}

    private TelemetryClient InitializeTelemetry(){/**/}

    public void TrackPageView(string name){/**/}

    public void TrackException(Exception ex){/**/}

    public void TrackEvent(string eventName, Dictionary<string, string> options = null){/**/}

    public void TrackMetric(string metricName, int value){/**/}

    public void TrackTrace(string eventName, int number){/**/}

    public void Flush(){/**/}
}
							</code>
					</pre>
				</section>
				<section>
					<h3>Singleton</h3>
					<pre>
						<code class="hljs" data-trim>
public class ApplicationInsight
{
    private static readonly Lazy&lt;ApplicationInsight&gt; _instance = 
		new Lazy&lt;ApplicationInsight&gt;(() =&gt; new ApplicationInsight());
    private readonly TelemetryClient _tc;

    private ApplicationInsight()
    {
        _tc = InitializeTelemetry();
    }

    public static ApplicationInsight Instance
    {
        get { return _instance.Value; }
    }
    //.......................	
}					
						</code>
					</pre>
				</section>
				<section>
					<h3>Инициализация параметров</h3>
					<pre>
						<code class="hljs">
private TelemetryClient InitializeTelemetry()
{
    var tc = new TelemetryClient
    {
        InstrumentationKey =
            @"clientNotification-ddadd7d9-4bd5-411a-ab5c-c1fe3322e005;
             a518aea0-2971-4fd4-9c38-595b8ffee7ab;
             a518aea0-2971-4fd4-9c38-595b8ffee7ab"
    };

    tc.Context.User.Id = Environment.UserName;
    tc.Context.Session.Id = Guid.NewGuid().ToString();
    tc.Context.Device.OperatingSystem = Environment.OSVersion.ToString();

    return tc;
}
						</code>						
					</pre>
				</section>
				<section>
					<h3>Пример использования</h3>
					<pre>
						<code class="hljs" data-trim>
static void Main(string[] args)
{
    ApplicationInsight.Instance.TrackPageView("Home");
    ApplicationInsight.Instance.TrackPageView("Account");

    ApplicationInsight.Instance.TrackEvent("Login");
    ApplicationInsight.Instance.TrackException(
		new AuthenticationException("User not found"));

    ApplicationInsight.Instance.TrackEvent("Redirect",
        new Dictionary&lt;string, string&gt;
        {
            { "From", "Account" },
            { "To", "Shop" },
            { "DailyKey" , "DSJU-WERDT-9803"}
        });
	
    ApplicationInsight.Instance.TrackPageView("Shop");
    ApplicationInsight.Instance.TrackTrace("Overtime", 100);
    ApplicationInsight.Instance.TrackMetric("Total count", 32);

    ApplicationInsight.Instance.Flush();
}							
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h2>Free account</h2>
				<img src="img/free-account.png" alt="">
			</section>
			<section>
				<h2>Схема работы пользователя</h2>
				<img src="img/scheme-1.png" alt="">
			</section>
			<section>
				<img src="img/azure-main.png" alt="">
			</section>
			<!-- Содержимое лекции -->
			<section>
				<h2 class="header-hide">Спасибо за внимание</h2>
				<img src="img/thanks.jpg" alt="" height="600">
			</section>
		</div>
	</div>
	<aside id="presentable-icon" class="revealjs">
		<a title="Содержание лекции" href="#/0/1">
			<i class="fa fa-list-ul fa-2x"></i>
		</a>
	</aside>
	<script src="../../js/bundle.min.js"></script>
</body>

</html>