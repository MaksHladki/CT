<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<title>Название лекции</title>
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Maks Hladki">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="../../css/bundle.min.css">
	<!--[if lt IE 9]>
		<script src="../../js/html5shiv.min.js"></script>
	<![endif]-->
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<section>
					<h1>Название лекции</h1>
					<h3>Разработка динамичесих веб приложений</h3>
					<p>
						<small>Гладкий Максим Валерьевич / <a href="https://github.com/MaksHladki">github:MaksHladki</a></small>
					</p>
				</section>
				<section>
					<h2>Содержание лекции</h2>
					<nav id="presentable-toc" class="table-content"></nav>
				</section>
			</section>
			<!-- Содержимое лекции -->
			<section>
				SQL Azure
			</section>
			<section>
				<section>
					<h2>Определение от Microsoft</h2>
					<blockquote>
						База данных SQL — это реляционная служба баз данных в Microsoft Cloud на основе популярного ядра Microsoft SQL Server, которая
						подходит для выполнения критически важных рабочих нагрузок. База данных SQL обеспечивает прогнозируемую производительность
						на нескольких уровнях службы, динамическую масштабируемость без простоев, встроенную непрерывность бизнес-процессов
						и защиту данных — и все это с минимальным администрированием. Так как база данных SQL основана на ядре SQL Server,
						она поддерживает имеющиеся средства, библиотеки и API-интерфейсы SQL Server. В результате это упрощает разработку новых
						решений, перенос и развертывание имеющихся решений SQL Server в Microsoft Cloud, и для этого вам не требуются новые
						навыки
					</blockquote>
				</section>
				<section>
					<h3>Преимущества</h3>
					<ul>
						<li>Развивается и адаптируется вместе с приложением - позволяет динамически увеличивать производительность, надежность
							и безопасность данных с минимальными усилиями со стороны клиента</li>
						<li>Обнаружение угроз и оповещения - имеется функции обнаружения угроз и аномалий: встроенный поведенческий анализ, оповещения
							в реальном времени, настраиваемые политики угроз, журнал аудита и интеллектуальные методы обнаружения и исправления
							нетипичных сценариев</li>
						<li>Автоматическая настройка - механизм оптимизации производительности приложений: непрерывный анализ типовых действий
							приложений, адаптивная настройка и автоматическая коррекция производительности</li>
						<li>Своевременные рекомендации - БД отслеживает каждый запрос и оценивать его длительность, частоту и затраты ресурсов.
							На основании этих данных автоматические алгоритмы корректируют настройки базы данных оптимальным образом в соответствии
							с характером запросов</li>
						<li>Не требует администрирования - автоматическое администрирование и защита данных в соответствии с потребностями приложения
							(автоматическое резервное копирование, аварийное восстановление при отработке отказа, обслуживание инфраструктуры,
							исправления систем безопасности и программного обеспечения, обновления компонентов)</li>
					</ul>
				</section>
				<section>
					<h3>Преимущества</h3>
					<ul>
						<li>Использование пулов эластичных баз данных для создания более эффективных мультитенантных приложений</li>
						<li>Управляемое автомасштабирование - пулы автоматически в режиме реального времени масштабируют производительность и емкость
							хранилища для эластичных баз данных</li>
						<li>Интеллектуальное управление средой - Встроенные рекомендации заблаговременно определяют, для каких баз данных использование
							пулов принесет пользу. Эти рекомендации позволяют выполнить анализ целевого состояния, чтобы быстро оптимизировать
							производительность в соответствии с вашими задачами. Широкие возможности панелей мониторинга и устранения неполадок
							помогают наглядно оценивать историю использования пула.</li>
						<li>Инструменты эластичных БД - Помимо пулов эластичных баз данных, базы данных SQL предоставляют полезные функции для
							управления рабочими операциями в нескольких базах данных. ** Выполнение запросов и отчетов по нескольким базам данных.
							**** Выполнение транзакций по нескольким базам данных. **** Выполнение одинаковых операций для нескольких баз данных.
							**
						</li>
						<li>Быстрое начало работы - В вашем распоряжении учебники по созданию первой базы данных SQL, возможность получить справку
							по устранению неполадок и простые примеры кода. В таких условиях найти правильный ответ на вопрос, связанный с базами
							данных, не составит труда.</li>
						<li>Идеальные инструменты для любых задач - Чтобы приступить к работе с базой данных SQL, не нужно изучать абсолютно новый
							набор инструментов. Вы можете использовать инструменты с открытым кодом, такие как cheetah, sql-cli и VS Code. Кроме
							того, база данных SQL Azure поддерживает инструменты Майкрософт, например Visual Studio и SQL Server Management Studio.
							Кроме того, портал управления Azure, PowerShell и интерфейсы REST API дополнительно упростят вам работу.</li>
					</ul>
				</section>
				<section>
					<h3>Уровни служб</h3>
					<ul>
						<li>Базовый - подходит для небольшой базы данных, для которой в определенный момент времени обычно выполняется одна активная
							операция (БД для разработки или тестирования, редко используемое приложение)</li>
						<li>Стандартный - оптимальный вариант для облачных приложений с низкими или средними требованиями к производительности
							операций ввода-вывода, поддерживающий несколько параллельных запросов (веб-приложения)</li>
						<li>Премиум - большой объем транзакций с высокими требованиями к производительности операций ввода-вывода. Поддерживается
							параллельная работа множества пользователей (БД для поддержки критически важных приложений)</li>
					</ul>
				</section>
				<section>
					<h3>Сравнение</h3>
					<table>
						<tr>
							<td>Максимальный размер отдельной БД</td>
							<td> 2 ГБ</td>
							<td>250 ГБ</td>
							<td>1 ТБ</td>
						</tr>
						<tr>
							<td>Максимальный размер хранилища</td>
							<td>117 ГБ</td>
							<td>750 ГБ</td>
							<td>1200 ГБ</td>
						</tr>
						<tr>
							<td>Число баз в пуле</td>
							<td>400</td>
							<td>400</td>
							<td>50</td>
						</tr>
						<tr>
							<td>Период хранения резервной копии</td>
							<td>7 дней</td>
							<td>35 дней</td>
							<td>35 дней</td>
						</tr>
					</table>
				</section>
				<section>
					<h3>Правила масштабирования от Microsoft</h3>
					<table>
						<thead>
							<tr>
								<th>Тип</th>
								<th>Пользователи</th>
								<th>Размер БД</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Basic</td>
								<td>5 </td>
								<td>720 МБ</td>
							</tr>
							<tr>
								<td>Standard (S0)</td>
								<td>10</td>
								<td> 1 GB</td>
							</tr>
							<tr>
								<td>Standard (S1)</td>
								<td>20 </td>
								<td>2,1 ГБ</td>
							</tr>
							<tr>
								<td>Standard (S2)</td>
								<td>50 </td>
								<td>7,1 ГБ</td>
							</tr>
							<tr>
								<td>Premium (P1)</td>
								<td>100 </td>
								<td>14 ГБ</td>
							</tr>
							<tr>
								<td>Premium (P2)</td>
								<td>200 </td>
								<td>28 ГБ</td>
							</tr>
							<tr>
								<td>Premium (P6/P3)</td>
								<td>800 </td>
								<td>114 ГБ</td>
							</tr>
						</tbody>
					</table>
				</section>
			</section>
			<section>
				<h2>Возможности SQL Azure</h2>
				<ul>
					<li>Может представлять собой отдельную базу данных с собственным набором ресурсов (DTU);</li>
					<li>Может входить в состав пула баз данных, в котором набор ресурсов используется совместно (eDTU);</li>
					<li>Может входить в состав масштабируемого набора сегментированных баз данных, которые могут быть отдельными базами данных
						или частью пула;</li>
					<li>Может входить в состав набора баз данных, использующихся в шаблоне разработки для мультитенантных приложений SaaS, которые
						могут быть отдельными базами данных или быть частью пула (или этот набор может иметь смешанную конфигурацию).</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Поддерживаемые функции</h2>
					<!-- https://github.com/Microsoft/azure-docs.ru-ru/blob/master/articles/sql-database/sql-database-features.md-->
				</section>
				<section>
					<h3>Часть 1</h3>
					<table>
						<thead>
							<tr>
								<th>Компонент</th>
								<th>SQL Server</th>
								<th>SQL Azure</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Активная георепликация</td>
								<td>-</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Постоянное шифрование</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Группы доступности AlwaysOn</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Присоединение базы данных</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Роли приложений</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Автомасштабирование</td>
								<td>-</td>
								<td>+</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Часть 2</h3>
					<table>
						<thead>
							<tr>
								<th>Компонент</th>
								<th>SQL Server</th>
								<th>SQL Azure</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Azure Active Directory</td>
								<td>-</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Фабрика данных Azure</td>
								<td>-</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Аудит</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Инструкции BACKUP и RESTORE</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Встроенные функции</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
							<tr>
								<td>Среда CLR</td>
								<td>+</td>
								<td>-</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Часть 3</h3>
					<table>
						<thead>
							<tr>
								<th>Компонент</th>
								<th>SQL Server</th>
								<th>SQL Azure</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Курсоры</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Сжатие данных</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Зеркальное отображение базы данных</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Моментальные снимки базы данных</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Инструкции языка DDL</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
							<tr>
								<td>Триггеры DDL</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Часть 4</h3>
					<table>
						<thead>
							<tr>
								<th>Компонент</th>
								<th>SQL Server</th>
								<th>SQL Azure</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Инструкции языка DML</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
							<tr>
								<td>Триггеры DML</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>эластичные пулы</td>
								<td>-</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Файловый поток</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Функции</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
							<tr>
								<td>Поддержка данных JSON</td>
								<td>+</td>
								<td>+</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Часть 5</h3>
					<table>
						<thead>
							<tr>
								<th>Компонент</th>
								<th>SQL Server</th>
								<th>SQL Azure</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Управление на основе политик</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Предикаты</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Безопасность на уровне строк</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Семантический поиск</td>
								<td>+</td>
								<td>-</td>
							</tr>
							<tr>
								<td>Порядковые номера</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Агент SQL Server</td>
								<td>+</td>
								<td>-</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Часть 6</h3>
					<table>
						<thead>
							<tr>
								<th>Компонент</th>
								<th>SQL Server</th>
								<th>SQL Azure</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>PowerShell</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Репликация SQL Server</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
							<tr>
								<td>Хранимые процедуры</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>Секционирование таблиц.</td>
								<td>+</td>
								<td>-/+</td>
							</tr>
							<tr>
								<td>Временные таблицы</td>
								<td>+</td>
								<td>+</td>
							</tr>
							<tr>
								<td>XML-индексы</td>
								<td>+</td>
								<td>+</td>
							</tr>
						</tbody>
					</table>
				</section>
			</section>
			<section>
				<section>
					<h2>Эластичеые пулы</h2>
				</section>
				<section>
					<h3>Определение от Microsoft</h3>
					<blockquote>
						Пулы эластичных БД SQL обеспечивают простое и экономически выгодное решение для управления целевыми показателями производительности
						для нескольких баз данных с совершенно разными и непредсказуемыми моделями функционирования.
					</blockquote>
				</section>
			</section>
			<section>
				<section>
					<h2>Eдиницы передачи данных (DTU)</h2>
				</section>
				<section>
					<blockquote>
						DTU — это единица измерения ресурсов, которые гарантированно доступны любой отдельной базе данных SQL Azure с определенным
						уровнем производительности в рамках уровня службы для отдельных баз данных.
					</blockquote>
				</section>
				<section>
					<h3>Структура единицы</h3>
					<ul>
						<li>показатели ЦП</li>
						<li>показатели памяти</li>
						<li>показатели ввода-вывода данных</li>
						<li>показатели ввода-вывода журналов транзакций</li>
					</ul>
				</section>
				<section>
					<h3>Повысить произодительность БД</h3>
					<blockquote>
						Повысить производительность базы данных (через удвоение DTU) означает удвоить количество ресурсов, доступных для этой базы
						данных. Например, база данных P11 уровня "Премиум" с 1750 единицами DTU обеспечивает в 350 раз больше вычислительной
						мощи, чем база данных уровня "Базовый" с 5 единицами DTU
					</blockquote>
				</section>
				<section>
					<h3>Наглядный пример</h3>
					<img src="img/single_db_dtus.png" alt="">
				</section>
				<section>
					<h3>Как выбрать нужный тип на основе DTU?</h3>
					<ul>
						<li>Использовать калькулятр</li>
						<li>Использовать PowerShell-скрипт</li>
						<li>Использовать Command Line Utility</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Eдиницы передачи данных (eDTU)</h2>
				</section>
				<section>
					<h3>Понятие от Microsoft</h3>
					<blockquote>
						eDTU — это единица измерения набора ресурсов (DTU), которые совместно используют несколько баз данных на сервере SQL Azure.
						Эти базы данных вместе называются пулом эластичных БД. Пулы эластичных БД обеспечивают простое и экономически выгодное
						решение для управления целевыми показателями производительности для нескольких баз данных с совершенно разными и непредсказуемыми
						моделями функционирования
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Пулу предоставляется заданное количество единиц eDTU по фиксированной цене</li>
						<li> Отдельным базам данных в пуле эластичных баз данных предоставляется возможность гибкого автоматического масштабирования
							в рамках заданных границ.</li>
						<li>Базы данных, на которые приходится значительная нагрузка, могут потреблять больше eDTU, чтобы обслужить имеющийся спрос,
							при этом базы данных с меньшей нагрузкой смогут потреблять меньше eDTU, а базы данных, которые не обслуживают никакой
							нагрузки, не будут потреблять eDTU</li>
						<li>Благодаря подготовке ресурсов для всего пула, а не одной базы данных, задачи управления упрощаются и вы можете спрогнозировать
							затраты на пул.</li>
						<li>Добавить дополнительные единицы eDTU в имеющийся пул можно без простоя баз данных в пуле или снижения их производительности</li>
						<li>ы можете добавить базы данных в пул или удалить их либо ограничить количество eDTU, которые базы данных могут использовать
							в условиях интенсивной нагрузки, чтобы сохранить eDTU для остальных баз данных</li>
						<li>Если у базы данных прогнозируемо низкие показатели использования ресурсов, ее можно переместить из пула и настроить
							в качестве отдельной базы данных с прогнозируемым объемом ресурсов, который ей необходим.</li>
					</ul>
				</section>
				<section>
					<h3>Наглядный пример</h3>
					<img src="img/sqldb_elastic_pools.png" alt="">
				</section>
			</section>
			<section>
				<section>
					<h2>Пулы эластичных БД</h2>
					https://github.com/Microsoft/azure-docs.ru-ru/blob/master/articles/sql-database/sql-database-elastic-pool-guidance.md https://docs.microsoft.com/ru-ru/azure/sql-database/sql-database-elastic-pool
				</section>
				<section>
					<h3>Определение от Microsoft</h3>
					<blockquote>
						Пулы эластичных БД SQL обеспечивают простое и экономически выгодное решение для управления целевыми показателями производительности
						для нескольких баз данных с совершенно разными и непредсказуемыми моделями функционирования.
					</blockquote>
				</section>
				<section>
					<h3>Принцип работы</h3>
					<ul>
						<li>В рамках распространенной модели SaaS каждому отдельному клиенту предоставляется собственная база данных.</li>
						<li>И каждый такой клиент (база данных) характеризуется непредсказуемым потреблением ресурсов памяти, ввода-вывода и ЦП</li>
						<li>Так как же эффективно и экономно распределить ресурсы, зная о колебаниях потребности в них? Обычно используется два
							подхода: 1) подготовка избыточного количества ресурсов, соответствующего пиковой нагрузке (ведет к повышению затрат);
							2) подготовка недостаточного количества ресурсов для экономии (ведет к снижению производительности и удовлетворенности
							клиентов во время пиковой нагрузки).</li>
						<li>В базе данных SQL относительная мера способности базы данных удовлетворять потребности в ресурсах выражается в единицах
							транзакций базы данных (DTU) для отдельных баз данных и эластичных DTU (eDTU) для баз данных в пулах эластичных БД</li>
						<li>Пулу предоставляется заданное количество единиц eDTU по фиксированной цене. Отдельным базам данных в пуле предоставляется
							возможность гибкого автоматического масштабирования в рамках заданных параметров. В условиях интенсивной нагрузки
							база данных может использовать дополнительные единицы eDTU для удовлетворения потребности в ресурсах. При небольших
							нагрузках базы данных используют меньше ресурсов (eDTU), а при отсутствии нагрузок не используют их вовсе. Подготовка
							ресурсов для всего пула, а не для отдельной базы данных упрощает задачи управления. Кроме того, используя пул, вы
							можете спрогнозировать расходы.</li>
						<li>Добавить дополнительные единицы eDTU в существующий пул можно без простоя баз данных. Однако чтобы предоставить дополнительные
							вычислительные ресурсы для нового резервирования eDTU может понадобиться переместить базы данных. Точно так же, если
							eDTU больше не нужны, они могут быть удалены из существующего пула в любой момент времени.</li>
						<li>
							Для пула эластичных БД лучше всего подходят базы данных, у которых чередуются периоды активности и простоя. В приведенном
							выше примере показана активность отдельной базы данных, четырех баз данных и пула эластичных БД с 20 базами данных.
							Базы данных, у которых периоды активности разнесены во времени, отлично подходят для включения в пулы эластичных баз
							данных. Так как в одно и то же время активны не все базы данных пула, они могут совместно использовать eDTU. Не все
							базы данных укладываются в эту схему. Для баз данных с более стабильной потребностью в ресурсах, лучше подходят уровни
							обслуживания "Базовый", "Стандартный" и "Премиум", в рамках которых ресурсы назначаются по отдельности.
						</li>
					</ul>
					<blockquote>
						Пулы эластичных БД решают эту проблему, обеспечивая базы данных необходимыми ресурсами производительности, когда они нужны.
						Они предоставляют простой механизм распределения ресурсов в рамках прогнозируемого бюджета. Дополнительные сведения
						о шаблонах разработки для приложений SaaS, использующих пулы эластичных БД
					</blockquote>
				</section>
			</section>
			<section>
				<h2>Функции запросов</h2>
				<blockquote>
					С помощью функции запросов к эластичной базе данных (доступна в режиме предварительной версии) можно выполнять запросы Transact-SQL
					для обращения сразу к нескольким базам данных в базе данных SQL Azure (SQLDB). Эта возможность позволяет создавать межбазовые
					запросы для доступа к удаленным таблицам. Также вы можете подключать средства Майкрософт и сторонних производителей
					(Excel, PowerBI, Tableau и т. д.) для выполнения запросов на разных уровнях данных со множеством баз данных. С помощью
					этой функции можно разворачивать запросы до уровней большого объема данных в базе данных SQL и визуализировать результаты
					в отчетах по бизнес-аналитике (BI).
				</blockquote>
				<p>Преимущества элестичных запросов</p>
				<ul>
					<li>база данных SQL Azure; Выполняйте запросы к нескольким базам данных SQL Azure только в T-SQL. Это позволяет отправлять
						в удаленные базы данных запросы только для чтения. Благодаря этому текущие пользователи локального сервера SQL Server
						могут переместить приложения в базу данных SQL, используя имена, состоящие из трех или четырех частей, либо связанный
						сервер.
					</li>
					<li>Доступно на стандартном уровне. В настоящее время эластичные запросы поддерживаются на уровнях производительности "Стандартный"
						и "Премиум". Сведения об ограничениях производительности для нижних уровней производительности см. в разделе "Ограничения
						предварительной версии" ниже.</li>
					<li>Отправка в удаленные базы данных Эластичные запросы к удаленным базам данных теперь могут отправлять параметры SQL для
						выполнения.
					</li>
					<li>Выполнение хранимой процедуры Выполнить вызовы удаленных хранимых процедур или удаленных функций можно с помощью процедуры
						sp_execute _remote.</li>
					<li>Гибкость Функция эластичных запросов теперь позволяет внешним таблицам ссылаться на удаленные таблицы с разными именами
						схем или таблиц.</li>
				</ul>
			</section>
			<section>
				<h3>Схема работы</h3>
				<img src="img/overview_sql.png" alt="">
			</section>
			<section>
				<h2>Способы применения элемтичных запросов</h2>
				<ul>
					<li>Вертикальное секционирование — межбазовые запросы (топология 1): вертикальное разделение данных между несколькими базами
						данных в рамках одного уровня. Например, все таблицы, связанные с данными инвентаризации, хранятся в одной базе данных,
						а таблицы, связанные с учетом, — в другой</li>
					<li>Горизонтальное секционирование — сегментирование (топология 2): горизонтальное разделение данных для распределения строк
						в рамках масштабируемого уровня данных. При таком подходе схемы всех включенных баз данных являются идентичными. Сегментирование
						может выполняться с помощью (1) библиотеки средств эластичной базы данных или (2) как самостоятельное сегментирование</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Масштабирование c использованием сегментирования</h2>
				</section>
				<section>
					<h2>Понятие</h2>
					<blockquote>
						Масштабирование приложений с использованием сегментирования — это непростая задача как для разработчика, так и для администратора.
						Клиентская библиотека упрощает задачи управления, предоставляя средства управления масштабируемыми базами данных для
						разработчиков и администраторов. В типичном примере существует несколько баз данных для управления, называемых "сегментами".
						Клиенты расположены в одной и той же базе данных, и для каждого клиента существует одна база данных (схема с одним
						клиентом). Клиентская библиотека включает следующие возможности:
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Управление картой сегментов. Создается специальная база данных - диспетчер карты сегментов. Управление сопоставлением
							сегментов позволяет приложению управлять различными метаданными своих сегментов. Разработчики могут использовать этот
							функционал для регистрации баз данных в качестве сегментов, описания сопоставлений отдельных ключей сегментирования
							или диапазонов этих баз данных. Функции библиотеки задействуются и для обновления метаданных по мере изменения числа
							и композиций баз данных для отражения вносимых в систему баз данных изменений</li>
						<li>Маршрутизация на основе данных - на основе данных позволяет открыть соединение, сделав один простой вызов в диспетчер
							сопоставлений сегментов приложения: На основе ключа сегментирования приложение определяет нужную базу данных. После
							этого оно открывает подключение к базе данных для обработки запроса</li>
						<li>Многосегментные запросы (MSQ). Многосегментное формирование запросов применяется в том случае, когда запрос относится
							к нескольким (или всем) сегментам. Многосегментный запрос выполняет одинаковый код T-SQL во всех сегментах или наборе
							сегментов. Результаты из задействованных сегментов объединяются в общий набор результатов с помощью семантики UNION
							ALL
						</li>
					</ul>
				</section>
			</section>
			<section>
				<h1>Azure DocumentDB</h1>
			</section>
			<section>
				<section>
					<h2>Определение от Microsoft</h2>
					<blockquote>
						Это полностью управляемая служба баз данных NoSQL, созданная для быстрой и прогнозируемой работы, высокой доступности, гибкого
						масштабирования, глобального распространения данных и простоты разработки. DocumentDB — это служба баз данных NoSQL
						без схемы, обеспечивающая широкие возможности запросов SQL со знакомым синтаксисом, согласованность и небольшую продолжительность
						задержек для данных JSON: 99 % операций чтения обрабатываются менее 10 миллисекунд, а 99 % операций записи — менее
						15 миллисекунд
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Гибко масштабируемые пропускная способность и объем хранения - база данных легко масштабируется в соответствии с потребностями,
							хранятся на твердотельных накопителях (SSD), поддерживает контейнеры для хранения данных JSON, которые можно масштабировать,
							достигая практически неограниченных размеров хранилища и подготовленной пропускной способности
						</li>
						<li>Репликация между несколькими регионам - позволяет разрабатывать приложения, которым требуется глобальный доступ к данным,
							при этом обеспечивая компромиссы между согласованностью, доступностью и производительностью с соответствующими гарантиями.
							DocumentDB обеспечивает прозрачную отработку отказа между регионами с помощью API-интерфейсов с поддержкой множественной
							адресации, а также возможность гибко масштабировать пропускную способность и размер хранилища по всему миру. Дополнительные
							сведения см. в статье Глобальное распространение данных с помощью DocumentDB.</li>
						<li>Одноранговые запросы со знакомым синтаксисом SQL — хранение гетерогенных документов JSON в DocumentDB и запросы к этим
							документам с помощью знакомого синтаксиса SQL. DocumentDB использует безблокировочную технологию индексирования с
							высокой степенью параллелизма и структурированием журналов для автоматического индексирования всего содержимого документов.
							Это позволяет формировать многофункциональные запросы в режиме реального времени без необходимости указывать подсказки
							для схемы, вторичные индексы или представления. Дополнительные сведения см. в статье SQL-запросы и синтаксис SQL в
							DocumentDB.
						</li>
						<li>Выполнение JavaScript в базе данных — реализация логики приложения в виде хранимых процедур, триггеров и пользовательских
							функций (UDF), использующих стандартный JavaScript. Это позволяет логике приложения оперировать данными, не беспокоясь
							о соответствии между приложением и схемой базы данных. Глубокая интеграция JavaScript позволяет выполнять операции
							INSERT, REPLACE, DELETE и SELECT из кода JavaScript в изолированной транзакции</li>
						<li>Настраиваемые уровни согласованности — выбор из четырех четко определенных уровней согласованности для достижения оптимального
							соотношения между согласованностью и производительностью. Для запросов и операций чтения DocumentDB предлагает четыре
							отдельных уровня согласованности — strong (сильная), bounded-staleness (ограниченная), session (уровень сеанса) и
							eventual (согласованная в конечном счете).</li>
						<li>Полная управляемость: устранение необходимости управления базой данных и вычислительными ресурсами. В полностью управляемой
							службе Microsoft Azure вам не нужно заниматься управлением виртуальными машинами, развертыванием и настройкой программного
							обеспечения или масштабированием или иметь дело со сложными обновлениями на уровне данных. Каждая база данных автоматически
							сохраняется и защищается от региональных сбоев.
						</li>
						<li>
							Открытая структура: быстрое начало работы с имеющимися навыками и инструментами. Программирование DocumentDB является простым
							и доступным и не требует изучения вами новых средств или пользовательских расширений для JSON или JavaScript. Вы можете
							получить доступ ко всей функциональности базы данных, включая CRUD, запросы и обработку JavaScript через простой RESTful-интерфейс
							HTTP. DocumentDB охватывает существующие форматы, языки и стандарты, предлагая широкие возможности и функции базы
							данных.
						</li>
						<li>Автоматическая индексация. По умолчанию DocumentDB автоматически индексирует все документы в базе данных, не ожидая
							и не требуя наличия какой-либо схемы или создания дополнительных индексов. Не желаете индексировать все файлы? Вы
							всегда можете отказаться от использования путей к своим JSON-файлам .</li>
					</ul>
				</section>
				<section>
					<h2>выполняется управление данными в DocumentDB?</h2>
					<blockquote>
						Azure DocumentDB управляет данными JSON с помощью четко определенных ресурсов базы данных. Эти ресурсы реплицируются для
						обеспечения высокой доступности и однозначно адресуются по их логическому URI. DocumentDB предлагает простую и открытую
						модель программирования RESTful поверх HTTP. Учетная запись базы данных DocumentDB — это уникальное пространство имен,
						предоставляющее доступ к хранилищу Azure DocumentDB. Прежде чем создавать учетную запись базы данных, вам необходимо
						оформить подписку Azure, которая дает доступ к различным службам Azure. Все ресурсы в DocumentDB моделируются и хранятся
						в виде документов JSON. Ресурсами управляются как элементы, которые представляют собой документы JSON, содержащие метаданные
						и как потоки, которые представляют собой коллекции элементов. Наборы элементов содержатся внутри соответствующих потоков.
					</blockquote>
					<blockquote>
						Учетная запись базы данных состоит из набора баз данных, каждая из которых содержит несколько коллекций, каждая из которых
						в свою очередь содержит хранимые процедуры, триггеры, определяемые пользователем функции, документы и соответствующие
						вложения. База данных также имеет связанных с ней пользователей, каждый из которых обладает набором разрешений для
						доступа к коллекциям, хранимым процедурам, триггерам, определяемым пользователем функциям, документам и вложениям.
						В то время как базы данных, пользователи, разрешения и коллекции являются определяемыми системой ресурсами с известными
						схемами, документы, хранимые процедуры, триггеры, определяемые пользователем функции и вложения содержат произвольное,
						определяемое пользователем содержание в формате JSON.
					</blockquote>
				</section>
				<section>
					<h2>Запросы SQL</h2>
					<blockquote>
						Azure DocumentDB поддерживает выполнение запросов к документам, используя язык SQL, который уходит своими корнями в систему
						типов JavaScript, и выражения с поддержкой реляционных, иерархических и пространственных запросов. Язык запросов DocumentDB
						является простым, но мощным интерфейсом для запроса документов JSON. Язык поддерживает грамматику подмножества ANSI
						SQL и добавляет глубокую интеграцию объектов, массивов, создания объектов и вызова функций JavaScript. DocumentDB предоставляет
						свою модель запросов без явных схем или подсказок индексации от разработчика. Пользовательские функции (UDF) могут
						быть зарегистрированы в DocumentDB, и ссылаться на них можно как на часть SQL-запроса, тем самым расширяя грамматику
						для поддержки логики пользовательского приложения. Эти определяемые пользователем функции записываются в виде программ
						JavaScript и выполняются в базе данных. Кроме того, разработчикам для .NET DocumentDB предоставляет поставщик запросов
						LINQ в составе пакета SDK для .NET.
					</blockquote>
				</section>
				<section>
					<h3>Транзакции и выполнение JavaScript</h3>
					<blockquote>
						DocumentDB позволяет вам реализовать логику приложения в виде программ, написанных полностью на JavaScript. Эти программы
						регистрируются в коллекции и могут выполнять операции с документами базы данных в пределах данной коллекции. JavaScript
						может быть зарегистрирован для выполнения в качестве триггера, хранимой процедуры или пользовательской функции (UDF).
						Триггеры и хранимые процедуры могут создавать, читать, обновлять и удалять документы, в то время как определяемые пользователем
						функции выполняются в рамках логики выполнения запроса без доступа на запись в коллекции. Выполнение JavaScript в DocumentDB
						моделируется по принципам, поддерживаемым реляционными СУБД, с JavaScript в качестве современной замены Transact-SQL.
						Вся логика JavaScript выполняется в транзакции ACID с изоляцией моментального снимка. В ходе его исполнения, если код
						JavaScript генерирует исключение, то вся транзакция прерывается.
					</blockquote>
				</section>
				<section>
					<h3>Коллекции</h3>
					<blockquote>
						Коллекция DocumentDB — контейнер для документов JSON. Коллекция также является единицей масштабирования для транзакций и
						запросов.
					</blockquote>
					<ul>
						<li>Гибкое хранилище документов на базе SSD - коллекция является гибкой, она автоматически увеличивается и уменьшается
							по мере добавления или удаления документов. Число секций в коллекции определяется DocumentDB по размеру хранилища
							и пропускной способности, выделенных для коллекции. С каждой секцией в DocumentDB связано фиксированное хранилище
							на основе SSD, которое реплицируются для обеспечения высокого уровня доступности</li>
						<li>Автоматическое индексирование коллекций — система баз данных без схемы. Она не подразумевает и не требует указания
							каких-либо схем для документов JSON. По мере добавления документов в коллекции DocumentDB автоматически индексирует
							их, и они становятся доступны для выполнения запросов. Автоматическая индексация документов, не требующая указания
							схемы или вторичных индексов, является ключевой возможностью DocumentDB и доступна благодаря оптимизации записи, безблокировочной
							и оптимизированной журнально-структурированной технологии обслуживания индексов. DocumentDB поддерживает устойчивый
							объем чрезвычайно быстрых операций записи и в то же время обслуживает согласованные запросы</li>
						<li>Настройка политики индексирования коллекции - Политика индексирования каждой коллекции позволяет настраивать соотношения
							производительности и объема, связанные с индексацией. Для конфигурации индексирования доступны следующие параметры:
							Выберите, будет ли коллекция автоматически индексировать все документы или нет. По умолчанию все документы индексируются
							автоматически. Можно отключать автоматическое индексирование и добавлять только выбранные документы в индекс. И наоборот,
							вы можете выборочно указать, какие документы необходимо исключить из индексирования. Вы можете добиться этого путем
							установки автоматического логического свойства indexingPolicyколлекции и с помощью заголовка запроса [x-ms-indexingdirective]
							при вставке, замене или удалении документа. Укажите, следует ли включить или исключить определенные пути или шаблоны
							в документах из индекса. Вы можете добиться этого путем установки includedPaths и excludedPaths на indexingPolicy
							коллекции соответственно. Вы также можете настроить соотношения объема и производительности для интервала и хэш-запросов
							для конкретных шаблонов пути. Выбор между синхронными обновлениями (согласованные) и асинхронными обновлениями (отложенные)
							индекса. По умолчанию, индекс обновляется синхронно при каждой операции вставки, заменить или удаления документа в
							коллекции. Это позволяет выполнять запросы с уровнем согласованности, как и в документе. В то время как DocumentDB
							оптимизирован для операций записи и поддерживает устойчивые объемы записей документов вместе с синхронным обслуживанием
							индекса и обслуживанием согласованных запросов, вы можете настроить определенные коллекции для отложенного обновления
							своих ​​индексов. Отложенное индексирование еще больше повышает производительность операций записи и идеально подходит
							для сценариев пакетной вставки, прежде всего для чтения больших коллекций.</li>
						<li>Документы в коллекции могут иметь произвольные схемы, и вы можете запрашивать их без предварительного предоставления
							любой схемы или вторичных индексов. Вы можете создавать запросы к коллекции, используя синтаксис SQL DocumentDB. Он
							предоставляет богатый выбор иерархических, реляционных и пространственных операторов и расширяемость с использованием
							определяемых пользователем функций на основе JavaScript. Грамматика JSON позволяет моделировать документы JSON в форме
							деревьев с метками в качестве узлов. Этот подход используется для автоматического индексирования DocumentDB, а также
							лежит в основе диалекта SQL DocumentDB. Язык запросов DocumentDB построен на следующих трех основных принципах.</li>
						<li></li>
					</ul>
				</section>
				<section>
					<ul>
						<li>Изначально секционирует данные для обеспечения высокой доступности и масштабируемости</li>
						<li>Хранилище на базе SSD с низкой задержкой и временем ответа</li>
						<li>Поддержка уровней согласованности, таких как bounded-staleness (ограниченная), session (уровень сеанса) и eventual
							(согласованная в конечном счете), обеспечивает оптимальное соотношение затрат и производительности</li>
						<li>Гибкая модель ценообразования, в которой место для хранения и пропускная способность измеряются независимо
						</li>
						<li>Модель зарезервированной пропускной способности DocumentDB позволяет вести учет по количеству операций чтения и записи,
							а не по ресурсам ЦП, памяти и операций ввода-вывода базового оборудования</li>
						<li>Структура DocumentDB допускает масштабирование для огромного числа запросов, измеряемого миллиардами запросов в день</li>
					</ul>
				</section>
				<section>
					https://github.com/Microsoft/azure-docs.ru-ru/blob/master/articles/documentdb/documentdb-sql-query.md
				</section>
			</section>
			<section>
				<img src="img/documentdb.png" alt="">
			</section>
			<section>
				<h2 class="header-hide">Спасибо за внимание</h2>
				<img src="img/thanks.jpg" alt="" height="600">
			</section>
		</div>
	</div>
	<aside id="presentable-icon" class="revealjs">
		<a title="Содержание лекции" href="#/0/1">
			<i class="fa fa-list-ul fa-2x"></i>
		</a>
	</aside>
	<script src="../../js/bundle.min.js"></script>
</body>

</html>