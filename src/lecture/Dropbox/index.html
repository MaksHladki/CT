<!doctype html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<title>Облачное хранилище данных Dropbox</title>
	<meta name="description" content="Dropbox">
	<meta name="keywords" content="Dropbox">
	<meta name="author" content="Maks Hladki">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="../../css/bundle.min.css">
	<!--[if lt IE 9]>
		<script src="../../js/html5shiv.min.js"></script>
	<![endif]-->
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<section>
					<h1>Облачное хранилище данных Dropbox</h1>
					<h3>Облачные технологии</h3>
					<p>
						<small>Гладкий Максим Валерьевич / <a href="https://github.com/MaksHladki">github:MaksHladki</a></small>
					</p>
				</section>
				<section>
					<h2>Содержание лекции</h2>
					<nav id="presentable-toc" class="table-content"></nav>
				</section>
			</section>
			<section>
				<h2>Определение</h2>
				<blockquote>
					Dropbox — облачное хранилище, в котором пользователи могут сохранять свои файлы, синхронизировать их между разными устройствами,
					делиться информацией друг с другом
				</blockquote>
				<blockquote>
					Dropbox — файловый хостинг компании Dropbox Inc., включающий персональное облачное хранилище, синхронизацию файлов и программу-клиент.
					Штаб-квартира компании расположена в Сан-Франциско
				</blockquote>
			</section>
			<section>
				<h2>Немного статистики</h2>
				<ul>
					<li>Более 500 млн. пользователей</li>
					<li>Более 300 тыс. корпоративных клиентов</li>
					<li>Более 1.2 млрд. новых файлов каждый день</li>
					<li>Более 1 млн. файлов сохраняются каждые 10 минут</li>
					<li>Одно из самых скачиваемых приложений (шутка про Skype)</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Особенности</h2>
					<ul>
						<li>Позволяет пользователям создать "специальную папку", которую Dropbox синхронизирует таким образом, что она имеет одинаковое
							содержимое независимо от того, какое устройство используется для просмотра</li>
						<li>Файлы, размещенные в "специальной" папке, доступны через веб-сайт и мобильные приложения</li>
						<li>Работает по модели Freemium, в которой пользователи имеют возможность создать бесплатный аккаунт с заданным количеством
							свободного пространства, в то время как для увеличения объема аккаунта необходима платная подписка</li>
						<li>Ведет историю загрузок, чтобы после удаления файлов с сервера была возможность восстановить данные</li>
						<li>Ведет историю изменения файлов, которая доступна на период последних 30 дней, доступна функция расширенного журнала
							версий
						</li>
					</ul>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Файлы, загруженные через клиент, не имеют ограничения на размер, но файлы, загруженные через веб-интерфейс, ограничены
							20 ГБ</li>
						<li>
							Для совместной работы над проектами сервис имеет возможность создания «Shared» папок для общего доступа лиц, имеющих разные
							учетные записи на сервисе
						</li>
						<li>Dropbox не использует шифрование данных на стороне клиента</li>
						<li>Практически отсутствует реклама</li>
					</ul>
				</section>
			</section>
			<section>
				<h3>Тарифные планы</h3>
				<ul>
					<li>Бесплатный - предлагает 2 ГБ для хранения данных, которые можно увеличить бесплатно до 16 ГБ, приглашая новых пользователей
						или же получить несколько гигабайт после выполнения заданий (установка приложения Dropbox на мобильный телефон и т.
						д.)
					</li>
					<li>Pro (для частных лиц) - 8.25$ в месяц с пользователя, 1 ТБ</li>
					<li>Standard (для бизнеса) - 12.25$ в месяц с пользователя, 2 ТБ</li>
					<li>Advanced (для бизнеса) - 20$ в месяц с пользователя, столько места, сколько необходимо</li>
					<li>Enterprise (для бизнеса) - по договоренности, столько места, сколько необходимо</li>
				</ul>
			</section>
			<section>
				<h2>Язык разработки</h2>
				<ul>
					<li>Клиентская часть разработана на языке Python с использованием сторонних библиотек, таких как librsync. Клиент поддерживает
						все основные ОС: Windows, Mac, Linux</li>
					<li>Для серверной части и системы хранения используются Go, Rust и Python</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>История изменения данных</h2>
					<ul>
						<li>История изменения файлов ведется по принципу diff-кодирования, чтобы сэкономить место, занимаемое файлами</li>
						<li>В истории изменения записывается только отличие одной версии файла от другой</li>
					</ul>
				</section>
				<section>
					<h3>Немного про diff-кодирование</h3>
					<blockquote>
						Работа diff основана на нахождении наибольшей общей подпоследовательности (longest common subsequence,LCS)
					</blockquote>
				</section>
				<section>
					<h3>Пример</h3>
					<pre>
						<code class="hljs">
//файл 1
a b c d f g h j q z 
a b c d e f g i j k r x y z
//файл 2
						</code>
					</pre>
					<pre>
						<code class="hljs">
//наибольшая подпоследовательность
a b c d f g j z
						</code>
					</pre>
					<pre>
						<code class="hljs">
//результат
e   h i   k   q r x y 
+   - +   +   - + + +
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h1>Архитектура</h1>
			</section>
			<section>
				<section>
					<h2>Два слоя</h2>
					<ul>
						<li>Первый слой — cервер метаданных, в нем хранится информация о файлах, связи между файлами, информация о пользователях,
							какая-то бизнес логика</li>
						<li>Второй слой — блочное хранилище. Изначально, в 2011 году, все данные хранились в Amazon S3. В 2015 году было написано
							свое облачное хранилище (Magic Pocket), и эксабайты данных переместилиcь в это хранилище</li>
					</ul>
				</section>
				<section>
					<h3>Magic Pocket</h3>
					<blockquote>
						Специальное хранилище, разделенное на несолько зон. Несколько зон могут быть объеденены в одну большую зону (Pocket). Например,
						в Америке существуют три зоны, которые объеденены в один Pocket. Есть Pocket в Европе, с американским он не пересекается,
						потому что жители Европы не хотят, чтобы их данные были в Америке
					</blockquote>
					<blockquote>
						Зоны между собой реплицируют данные. Внутри зоны есть ячейки. Есть Master, который управляет этими ячейками. Есть репликации
						между зонами. В каждой ячейке есть Volume Manager, который следит за серверами, на которых хранятся эти данные
					</blockquote>
				</section>
				<section>
					<h3>Bucket</h3>
					<blockquote>
						На каждом отдельном сервере данные объеденены в Bucket, размер backet'а – 1 ГБ. Bucket используется при перемещении, копировании,
						удалении, дефрагментации данных
					</blockquote>
				</section>
				<section>
					<h3>Схема</h3>
					<img src="img/magic_pocket.png" alt="" height="550">
				</section>
				<section>
					<h3>Архитектура Zone</h3>
					<img src="img/zone.png" alt="">
				</section>
				<section>
					<h3>Chunk</h3>
					<blockquote>
						Для хранения информаии пользователей используются блоки. Размер блока до 4 МБ.
					</blockquote>
					<blockquote>
						В случае, если файл большего размера, он разбивается на несколько блоков, и каждый блок воспринимается системой независимо
						от других. Для каждого блока вычисляется SHA256 хеш, и эта информация является частью метаинформации о файле
					</blockquote>
					<blockquote>
						Dropbox уменьшает объем передаваемых данных за счет передачи только разницы между измененными блоками файла. Кроме того,
						локально он содержит всю метаинформацию по файлам, которую синхронизирует с сервером и передает только изменения с
						прошлой версии
					</blockquote>
				</section>
				<section>
					<h2>Два типа серверов</h2>
					<blockquote>
						Dropbox использует два типа серверов: управляющий (control) и сервер данных (data storage). Сервера управления находятся
						под контролем Dropbox, сервера данных — это сервера Амазона (Amazon S3, EC2). Для коммуникации с серверами во всех
						случаях используется HTTPS
					</blockquote>
				</section>
			</section>
			<section>
				<h2>Доступность и сохранность данных
				</h2>
				<ul>
					<li>Изоляция</li>
					<li>Защита</li>
					<li>Контроль</li>
					<li>Автоматизация</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>Виды изоляции</h2>
					<ul>
						<li>Физическая</li>
						<li>Логическая</li>
						<li>Эксплуатационная</li>
					</ul>
				</section>
				<section>
					<h3>Физическая изоляция</h3>
					<ul>
						<li>Dropbox владеет несколькими ЦОДами. В режиме 24/7 необходимо знать, как сервисы располагаются внутри дата центра, как
							к ним подводится энергия, какая сетевая доступность у этих сервисов. Необходимо распологать решения по обработке и
							хранения данных в разных серверных стойках и ЦОДах для более надежного резервирования</li>
						<li>Необходимо использовать оборудование от различных поставщиков с разными прошивками и драйверами (определенные решения
							могут оказаться ненадежными)
						</li>
						<li>Резервирование определенной части инфрастуктуры в частном облаке (Amazon). Если возникнут неполадки внутри системы,
							ее можно будет восстановить из внешних бэкапов</li>
					</ul>
				</section>
				<section>
					<h3>Логическая изоляция</h3>
					<ul>
						<li>Изоляция сервисов - если один сервис начинает испытывать какие-то проблемы (баг в коде и т.д.), то другие сервисы тоже
							могут начать работать нестабильно</li>
						<li>Необходимость слабой связанности между подсистемами (например, при использовании БД в режиме кластера)
						</li>
						<li>Использование зон. Существует несколько зон, которые обмениваются информацией друг с другом (get и put). Каждая зона
							включает в себя ZooKeeper, базы данных, кворумы и т.д. Зоны независимы друг от друга: если одна зона "упадет", остальные
							продолжат работать
						</li>
					</ul>
				</section>
				<section>
					<h3>Эксплуатационная изоляция</h3>
					<ul>
						<li>Человеческий фактор - как бы вы хорошо ни распределили функциональность по разным серверам и зонам, как бы хорошо ее
							логически ни изолировали, всегда найдется человек, который может сделает что-то не так</li>
						<li>Шутка про сисадминов и программистов - если бы все программисты и системные администраторы ушли куда-нибудь отдыхать,
							то система бы работала гораздо стабильнее, чем когда они работают</li>
						<li>Контроль доступа - после тестирования изменения "накатываются" на одну зону. Если все работает нормально, то изменения
							применяются и к другим зонам, и начинается процесс репликации данных</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Защита</h2>
					<blockquote>
						Защита данных основана на валидации операций, восстановлении данных и многоуровнего тестирования программного кода
					</blockquote>
				</section>
				<section>
					<h3>Валидация операций</h3>
					<blockquote>
						Оператор - самый главный риск для системы
					</blockquote>
					<blockquote>
						В Dropbox запрещено выполнять операции на production-сервисах (DB, memcache, storage). Нельзя ни в коем случае перезагрузить
						базу данных, не остановив ее и не убрав из production, так же с memcache. Все такие операции автоматизированы
					</blockquote>
				</section>
				<section>
					<h3>Пример</h3>
					<blockquote>
						В Dropbox при работе с БД используется различные библиотеки. Ко многим из них дописаны специальные расширения (proxy), которые
						позволяют запретить многие деструктивные операции (DROP TABLE, ALTER, updates без where и т.д.)
					</blockquote>
				</section>
				<section>
					<h3>Восстановление</h3>
					<blockquote>
						Очень важно не только создавать бэкапы, но и проверять, что эти бэкапы восстановятся и находятся в актуальном состоянии.
						В Dropbox постоянно развертывают инфраструктуру на тестовых серверах и проверяют процесс восстановления бэкапов. Постоянно
						запущены процессы клонирования БД, а также перемещения данных между master и slave (в двухстороннем режиме), между
						внутрненей экосистемой и облаком Amazone
					</blockquote>
				</section>
				<section>
					<h3>Тестирование</h3>
					<blockquote>
						Ad-hoc, unit-тестирование, интеграционное, нагрузочное и т.д. Все виды тестирования выполняются до стадии production, и поэтому
						тестирование не влияет на уровень доступности (Availability)
					</blockquote>
				</section>
				<section>
					<h3>Контроль</h3>
					<blockquote>
						Для контроля качества работы программистов, тестировщиков и операторов использую верификаторы
					</blockquote>
					<ul>
						<li>Количество строк кода, написанного для верификации больше, чем количество строк кода storage-хранилища</li>
						<li>25% внутреннего трафика — это верификации</li>
						<li>Используется от 5 до 8 уровней верификации</li>
					</ul>
				</section>
				<section>
					<h3>Уровни верификации</h3>
					<ol>
						<li>Disk scrubber - просто читают блоки с жесткого диска и проверяют контрольные суммы (производителям невыгодно, чтобы
							S.M.A.R.T находил ошибки, потому что им приходится заменять эти жесткие диски на новые). Если в результате проверки
							обнаруживаются ошибки, сразу же начинается процесс восстановления данных</li>
						<li>Trash Inspector - при удалении, перемещении данных они попадают в специальную корзину с последующей перепроверкой.
							Эти данные хранятся две недели. Все операции, которые необходимо выполнить над storage, сохраняются в Kafka. Потом
							эти операции применяются уже к storage</li>
					</ol>
				</section>
				<section>
					<h3>Уровни верификации (продолжение)</h3>
					<ol start="3">
						<li>Metadata Scanner - проверяет, чтобы все данные в индексах соответствовали правильным узлам хранения</li>
						<li>Storage Watcher - использование метода черного ящика для проверки доступности данных через определенный промежуток
							времени (минута, час, день, месяц и т.д.)</li>
						<li>Cross-zone Veriﬁer - на уровне приложения специальное ПО (walker) проверяет все данные в системе хранения, а также
							соответствие между данными и областями хранения</li>
					</ol>
				</section>
			</section>
			<section>
				<section>
					<h2>Автоматизация</h2>
					<blockquote>
						В Dropbox атоматизация используется повсеместно, в том числе и для замены ИТ-профессионалов. Количество пользователей системы
						растет экспотенциально и компания просто не успевает обучать нужное количество сотрудников
					</blockquote>
				</section>
				<section>
					<h3>Использование метрик</h3>
					<blockquote>
						Ключевой частью процесса автоматизации является механизм сбора метрик с основных частей инфраструктуры. Без метрик очень
						сложно опеределить работоспособность сервиса. Dropbox старается собирать метрики очень часто, на ключевых частях системы
						чаще, чем раз в минуту
					</blockquote>
				</section>
				<section>
					<h3>Быстрое реагирование</h3>
					<blockquote>
						Автоматизация позволяет ускорить процесс решения определенных проблем. Внутренние сервисы отправляют специальные уведомления
						(alert) с подробной информацией об ошибках сотруднику, указанному в правилах ИТ-подразделения. В Policy-документах
						компании указано время регулирования в течение 5 минут
					</blockquote>
				</section>
				<section>
					<h3>Параноидальная автоматизация (Naoru)</h3>
					<img src="img/параноидальная_автоматизация.png" alt="" height="550">
				</section>
				<section>
					<h3>Структура параноидаольной автоматизации</h3>
					<ol>
						<li>Система генерирует и отправляет уведомление (alert)</li>
						<li>Необимо проанализировать ситуацию и понять, что именно произошло (диагностика проблемы)</li>
						<li>Оператор должен проверить то решение, которое предложила система автоматизации, устранить проблему на основе полученной
							информации, либо установить факт невозможности решения данной проблемы и передать сведенья ИТ-отделу</li>
						<li>После решения каждой проблемы скрипт автоматизации исправляется и совершенствуется</li>
					</ol>
				</section>
			</section>
			<section>
				<section>
					<h2>Доменные имена (внутренние)</h2>
					<table>
						<thead>
							<tr>
								<th>Поддомен</th>
								<th>Хостинг</th>
								<th>Описание</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>client-lb/clientX</td>
								<td>Dropbox</td>
								<td>Meta data</td>
							</tr>
							<tr>
								<td>notifyX</td>
								<td>Dropbox</td>
								<td>Notifications</td>
							</tr>
							<tr>
								<td>api</td>
								<td>Dropbox</td>
								<td>API control</td>
							</tr>
							<tr>
								<td>www</td>
								<td>Dropbox</td>
								<td>Web servers</td>
							</tr>
							<tr>
								<td>d</td>
								<td>Dropbox</td>
								<td>Event logs</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Доменные имена (внешние)</h3>
					<table>
						<thead>
							<tr>
								<th>Поддомен</th>
								<th>Хостинг</th>
								<th>Описание</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>dl</td>
								<td>Amazon</td>
								<td>Direct links</td>
							</tr>
							<tr>
								<td>dl-clientX</td>
								<td>Amazon</td>
								<td>Client storage</td>
							</tr>
							<tr>
								<td>dl-debugX</td>
								<td>Amazon</td>
								<td>Back traces</td>
							</tr>
							<tr>
								<td>dl-web</td>
								<td>Amazon</td>
								<td>Web storage</td>
							</tr>
							<tr>
								<td>api-content </td>
								<td>Amazon</td>
								<td>API storage</td>
							</tr>
						</tbody>
					</table>
				</section>
			</section>
			<section>
				<section>
					<h2>Загрузка локальных изменений на сервер</h2>
				</section>
				<section>
					<h3>Описание</h3>
					<ol>
						<li>После регистрации клиента на управляющих серверах clientX.dropbox.com, команда list получает изменения в метаданных,
							которые показывают разницу между локальной копией и тем, что находится на сервере</li>
						<li>Как только происходит локальное изменение файлов, Dropbox вызывает команду commit_batch (client-lb.dropbox.com) и посылает
							измененные метаданные на сервер</li>
						<li>После этого сервер отвечает, какие блоки ему необходимы, используя команду need_blocks, и клиент отсылает эти блоки
							на Amazon (dl-clientX.dropbox.com)</li>
						<li>Сохранение каждого блока подтверждается командой "ОК"</li>
						<li>После этого локальный клиент еще раз раз посылает команду commit_batch на сервер и получает подтверждение, что все
							блоки получены. Транзакции сохранения данных могут выполняться параллельно</li>
					</ol>
				</section>
				<section>
					<h3>Схема</h3>
					<img src="img/upload_block.png" alt="" height="400">
				</section>
			</section>
			<section>
				<section>
					<h2>Группы управляющих серверов</h2>
				</section>
				<section>
					<h3>Уведомления</h3>
					<blockquote>
						Dropbox держит постоянное открытое TCP соеденинение с серверами уведомлений (notifyX.dropbox.com). Это необходимо для получения
						информации об изменении файлов, которое могло произойти на других клиентах. Информация не шифруется. Используется задержка
						HTTP ответа для быстрого уведомления клиентов (push mechanism, long polling). Клиент посылает запрос, и сервер задерживает
						ответ примерно на 60 секунд
					</blockquote>
				</section>
				<section>
					<h3>Управление метаданными</h3>
					<blockquote>
						Сервера управления метаданными отвечают не только за информирование об изменениях в блоках и файлах, но также и за авторизацию
						(authentication) клиента. Для этих серверов используются следующие доменные имена: client-lb.dropbox.com, clientX.dropbox.com.
						Кроме этого, сервера управления могут контролировать поведение клиента. Также сервера могут указать клиенту максимальное
						количество блоков, которое он может посылать на сервер. Это используется для управления трафиком, который генерирует
						клиент
					</blockquote>
				</section>
				<section>
					<h3>Системные сообщения</h3>
					<blockquote>
						Инфраструктура предоставляется Амазоном, и имеют название dl-debug.dropbox.com; остальные сообщения идут непосредственно
						на Dropbox d.dropbox.com
					</blockquote>
				</section>
			</section>
			<section>
				<section>
					<h2>Dropbox Infinite</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Новый способ доступа к файлам облачного хранилища на локальном компьютере на уровне файловой системы. Данный способ основан
						на тесном интегрировании клиентского приложения в ядро операционной системе. Локальный диск «увеличивается» на размер
						облачного хранилища, файлы доступны напрямую. Облачное хранилище может быть больше по размеру, чем локальный диск
					</blockquote>
				</section>
				<section>
					<h3>Особенности</h3>
					<ul>
						<li>Более высокий уровень производительности</li>
						<li>Замена стандартных библиотек FUSE на собственное расширение ядра устраняет излишнюю сложность и, следовательно, повышает
							безопасность системы</li>
						<li>В расширении ядра работает проверка прав доступа через Kernel Authorization (Copy Hooks в Windows), чтобы детектировать
							и запрещать определенные операции в папке Dropbox</li>
						<li>Если приложение работает в пространстве ядра, оно может позволить себе гораздо больше, чем обычная программа в пространстве
							пользователя
						</li>
						<li>Сказывается на безопасности всей системы, посколько Dropbox вклинивается в ее ядро</li>
					</ul>
				</section>
				<section>
					<h3>Старая схема (FUSE)</h3>
					<img src="img/FUSE.png" alt="" height="550">
				</section>
				<section>
					<h3>Новая схема (Infinite)</h3>
					<img src="img/infinity.png" alt="" height="550">
				</section>
			</section>
			<section>
				<h2>Неприятные инциденты</h2>
				<ul>
					<li>2011 - из-за ошибки в обновленном программном обеспечении сервера в течение четырех часов был возможен вход в любой
						аккаунт с использованием любого пароля</li>
					<li>2012 - утечка 68 млн. паролей клиентов (2/3 клиентов сервиса). Компания признала факт взлома спустя 4 года</li>
					<li>2017 - многие пользователи сообщили, что они обнаружили в своих папках файлы, которые были удалены несколько лет назад.
						Некоторые утверждают, что вновь увидели файлы, с момента удаления которых прошло 7 лет</li>
				</ul>
			</section>
			<section>
				<h1>Dropbox Business</h1>
			</section>
			<section>
				<h2>Архитектура</h2>
				<img src="img/Dropbox_businness_architecture.png" alt="">
			</section>
			<section>
				<section>
					<h2>Сервисы</h2>
				</section>
				<section>
					<h3>Шифрование и услуга по предоставлению приложений</h3>
					<blockquote>
						Данная услуга обеспечивает обработку данных во всех программах и приложениях Dropbox. Каждый файл делится на отдельные блоки,
						каждый из которых хэшируется и шифруется с помощью криптостойкого шифра. Только измененные блоки подлежат синхронизации.
						Когда пользователь вносит изменения, новые или измененные блоки обрабатываются и пересылаются в место хранения
					</blockquote>
				</section>
				<section>
					<h3>Хранение данных</h3>
					<blockquote>
						Сервис позволяет хранить содержимое файлов пользователей в виде зашифрованных блоков. Каждый индивидуальный зашифрованный
						блок вызывается на основе приписанного ему значения хеша. Все блоки данных, находящиеся в «состоянии покоя», защищаются
						дополнительным слоем криптостойкого шифра
					</blockquote>
				</section>
				<section>
					<h3>Метаданные</h3>
					<blockquote>
						Основная информация о данных пользователей (включая названия и типы файлов) называется метаданными и хранится в отдельном
						хранилище, а не там же, где хранятся сами блоки данных. Метаданные являются своего рода каталогом данных, находящихся
						в аккаунтах пользователей. Доступ к этой информации и ее копирование производятся по мере необходимости с целью улучшения
						пропускной способности системы и в зависимости от требований на доступность
					</blockquote>
				</section>
				<section>
					<h3>Уведомление</h3>
					<blockquote>
						Это отдельный сервис, предназначенный для отслеживания изменений в аккаунтах Dropbox. Данная услуга не пересылает никаких
						данных или метаданных. Вместо этого клиенты устанавливают длинное соединение (Long-polling) с этой услугой и ждут,
						пока не произойдут изменения. Информация о внесенных изменениях в свою очередь подает сигнал соответствующим клиентам,
						которые в ответ начинают выполнять свои функции
					</blockquote>
				</section>
				<section>
					<h3>Вывод</h3>
					<blockquote>
						Архитектура бизнес-аккаунтов полностью совпадает с частными аккаунтами, НО внедрены дополнительные механизмы защиты (например,
						шифрование блоков данных)
					</blockquote>
				</section>
			</section>
			<section>
				<h2>Шифрование</h2>
				<blockquote>
					Данные Dropbox защищает система 256-​разрядного шифрования AES.​ Чтобы защитить информацию во время пересылки между программами
					и приложениями Dropbox и серверами, используется протокол SSL/TLS для передачи данных, таким образом создавая безопасный
					коридор, защищенный не менее чем 128-разрядным шифрованием стандарта AES
				</blockquote>
				<blockquote>
					Доступ к производственным системам ограничен уникальными парами ключей SSH, при этом политика и методы обеспечения безопасности
					требуют защиты ключей SSH. Внутренняя система управляет процессом обмена безопасными открытыми ключами, а закрытые ключи
					безопасно сохраняются
				</blockquote>
			</section>
			<section>
				<section>
					<h2>Дополнительные возможности</h2>
				</section>
				<section>
					<h3>Интеграция со службами доступа</h3>
					<blockquote>
						Можно упростить внедрение в компанию или уход из нее нового сотрудника, автоматически добавив или удалив в Бизнес аккаунте
						Dropbox пользователей из Active Directory или LDAP или с помощью одного из поддерживаемых поставщиков удостоверений
					</blockquote>
				</section>
				<section>
					<h3>Функция единого входа (SSO)</h3>
					<blockquote>
						Можно упростить процесс аутентификации, воспользовавшись услугами одного из официальных партнеров Dropbox, обеспечивающих
						работу функции единого входа (SSO), или системой клиента, совместимой с протоколом SAML 2.0
					</blockquote>
				</section>
				<section>
					<h3>Двухэтапная проверка</h3>
					<blockquote>
						После включения двухэтапной проверки Dropbox попросит пользователя, когда тот будет заходить в систему или подключать новое
						устройство, ввести не только пароль, но и 6-значный код безопасности
					</blockquote>
					<p>С 2016 года доступна и частным пользователям</p>
				</section>
				<section>
					<h3>Два аккаунта Dropbox</h3>
					<blockquote>
						Любой пользователь может связать личный и рабочий аккаунты Dropbox на всех своих устройствах, чтобы не путаться в рабочих
						и личных данных. Администраторы могут включить или отключить доступ к этой функции в программе для компьютера у участников
						рабочей группы
					</blockquote>
				</section>
				<section>
					<h3>Восстановление удаленных файлов</h3>
					<blockquote>
						Все пользователи Dropbox Business могут самостоятельно восстанавливать утерянные файлы и старые версии файлов, созданные
						до 120 дней назад. А значит, важные данные не потеряются и их всегда можно будет восстановить
					</blockquote>
				</section>
				<section>
					<h3>Администрирование рабочих групп</h3>
					<blockquote>
						Администраторы имеют полный контроль над данными участников рабочей группы и могут завершать любые веб-сеансы, удалять данные,
						сохраненные непосредственно на компьютерах пользователей, и отключать сторонние приложения, подключенные к аккаунтам
						пользователей. В качестве меры безопасности администраторы также могут сбросить пароли одновременно всех участников
						рабочей группы или же отдельных сотрудников
					</blockquote>
				</section>
				<section>
					<h3>Расширенный API</h3>
					<ul>
						<li>Управление удостоверениями и функция единого входа (SSO)</li>
						<li>SIEM (управление информационной безопасностью и событиями безопасности) и аналитика</li>
						<li>Предотвращение потери данных (DLP)</li>
						<li>Технические средства защиты авторских прав (DRM)</li>
						<li>Обнаружение электронных данных (eDiscovery) и хранение данных для судебных нужд</li>
						<li>Перенос данных и локальное резервное копирование данных</li>
						<li>Более эффективные типовые рабочие процессы</li>
					</ul>
				</section>
			</section>
			<section>
				<h1>Dropbox API</h1>
			</section>
			<section>
				<h2>Ссылка</h2>
				<a href="https://www.dropbox.com/developers">https://www.dropbox.com/developers</a>
			</section>
			<section>
				<h2>С помощью чего можно разрабатывать</h2>
				<ul>
					<li>HTTP endpoints</li>
					<li>.NET SDK</li>
					<li>Java SDK</li>
					<li>JavaScript SDK</li>
					<li>Python SDK</li>
					<li>Swift SDK</li>
					<li>Objective-C SDK</li>
					<li>Community SDKs</li>
				</ul>
			</section>
			<section>
				<section>
					<h2>My APPS</h2>
				</section>
				<section>
					<h3>Create APP</h3>
					<a href="https://www.dropbox.com/developers/apps">https://www.dropbox.com/developers/apps</a>
					<img src="img/DR_my_apps.png" alt="">
				</section>
				<section>
					<h3>Dropbox platform</h3>
					<img src="img/DR_choose_paltform.png" alt="" height="550">
				</section>
				<section>
					<h3>Тип доступа</h3>
					<img src="img/DR_access_type.png" alt="" height="550">
				</section>
				<section>
					<h3>Имя приложения</h3>
					<img src="img/DR_app_name.png" alt="" height="550">
				</section>
				<section>
					<h3>Настройки (часть 1)</h3>
					<img src="img/DR_settings_1.png" alt="" height="550">
				</section>
				<section>
					<h3>Настройки (часть 2)</h3>
					<img src="img/DR_settings_2.png" alt="" height="550">
				</section>
				<section>
					<h3>Branding</h3>
					<img src="img/DR_branding.png" alt="" height="550">
				</section>
				<section>
					<h3>Analytics</h3>
					<img src="img/DR_analytics.png" alt="" height="550">
				</section>
			</section>
			<section>
				<h2 class="header-hide">Лирическое отступление</h2>
				<img src="img/лирическое_отступление.jpg" alt="" height="400">
			</section>
			<section>
				<section>
					<h2>Postman</h2>
					<img src="img/postman_1.png" alt="" height="550">
				</section>
				<section>
					<h3>Коллекции</h3>
					<img src="img/postman_2.png" alt="" height="550">
				</section>
				<section>
					<h3>Параметры запроса</h3>
					<img src="img/postman_3.png" alt="">
				</section>
				<section>
					<h3>Ответ</h3>
					<img src="img/postman_4.png" alt="">
				</section>
			</section>
			<section>
				<section>
					<h2>Authorization</h2>
				</section>
				<section>
					<h3>OAuth 2.0</h3>
					<blockquote>
						OAuth — открытый протокол авторизации, который позволяет предоставить третьей стороне ограниченный доступ к защищенным ресурсам
						пользователя без необходимости передавать ей (третьей стороне) логин и пароль
					</blockquote>
					<blockquote>
						Для получения доступа к HTTP API необходимо добавить к запросу специальный заголовок Authorization со значением Bearer 'TOKEN'.
						Где 'TOKEN' - токен доступа, полученный через OAuth flow
					</blockquote>
				</section>
				<section>
					<h3>Метод oauth2/authorize (GET)</h3>
					<blockquote>
						Данный метод является отправной точкой процесса авторизации по модели "authorization flow". После подтверждения прав сервер
						dropbox передает управления приложению через параметр redirect_uri </blockquote>
				</section>
				<section>
					<h3>Два модели использования</h3>
					<ul>
						<li>Code Flow - подходит для веб-приложений, перенаправляет на специальную страницу и запрашивает у пользователя права
							доступа. После подтверждения прав пользователь получает access token</li>
						<li>Token Flow - получает токен без подтверждения действий от пользователя. Для этого используется секретный ключ приложения,
							Подходит для js-, мобильных-приложений
						</li>
					</ul>
				</section>
				<section>
					<h3>Схема Code Flow</h3>
					<img src="img/DR_oauth_code_flow.png" alt="">
				</section>
				<section>
					<h3>Параметры запроса</h3>
					<table>
						<thead>
							<tr>
								<th>Имя</th>
								<th>Тип</th>
								<th>Описание</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>response_type</td>
								<td>String</td>
								<td>Тип модели: token flow или code flow</td>
							</tr>
							<tr>
								<td>client_id</td>
								<td>String</td>
								<td>Ключ приложения</td>
							</tr>
							<tr>
								<td>redirect_uri</td>
								<td>String?</td>
								<td>Определяет куда перенаправить пользователя после успешной аторизации. URL должен быть зарегистрирован в App Console.
									Редирект URI обязателен для token flow и опционален для модели сode flow</td>
							</tr>
							<tr>
								<td colspan="3">Второстепенные параметры: state,require_role, disable_signup, force_reapprove</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Результат (Code flow)</h3>
					<table>
						<thead>
							<tr>
								<th>Параметр</th>
								<th>Тип</th>
								<th>Описание</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>code</td>
								<td>String</td>
								<td>Код авторизации, который может быть использован для получения bearer token, путем вызова /oauth2/token</td>
							</tr>
							<tr>
								<td>state</td>
								<td>String</td>
								<td>Состояние содержания, если оно использовалось в запросе</td>
							</tr>
						</tbody>
					</table>
					<pre>
						<code class="hljs">
[REDIRECT_URI]
    ?code=[CODE]
    &state=[STATE]				
						</code>
					</pre>
				</section>
				<section>
					<h3>Результат (Token flow)</h3>
					<table>
						<thead>
							<tr>
								<th>Параметр</th>
								<th>Тип</th>
								<th>Описание</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>access_token</td>
								<td>String</td>
								<td>Токен, используемый для доступа к Dropbox API</td>
							</tr>
							<tr>
								<td>token_type</td>
								<td>String</td>
								<td>Тип токена, всегда используется bearer</td>
							</tr>
							<tr>
								<td>account_id</td>
								<td>String</td>
								<td>Идентификатор аккаута пользователя</td>
							</tr>
							<tr>
								<td>team_id </td>
								<td>String</td>
								<td>Идентификатор команды, если используется</td>
							</tr>
							<tr>
								<td>state</td>
								<td>String</td>
								<td>Состояние содержания, если оно использовалось в запросе</td>
							</tr>
						</tbody>
					</table>
					<pre>
						<code class="hljs" data-trim>
[REDIRECT_URI]
    ?access_token=ABCDEFG
    &token_type=bearer
    &account_id=dbid%3AAAH4f99T0taONIb-OurWxbNQ6ywGRopQngc
	&uid=12345
	&state=[STATE]
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h3>Пример 1</h3>
					<pre>
						<code class="hljs">
https://www.dropbox.com/1/oauth2/authorize
    ?client_id=y8xekb9h3e4s3s0
    &response_type=code
						</code>
					</pre>
					<img src="img/DR_oauth_request.png" alt="">
				</section>
				<section>
					<h3>Результат</h3>
					<img src="img/DR_oauth_result.png" alt="">
				</section>
			</section>
			<section>
				<h3>Пример 2</h3>
				<pre>
					<code class="hljs">	
https://api.dropbox.com/1/oauth2/token
    ?grant_type=authorization_code
    &code=OlhaH8T4wSAAAAAAAAAKrNWzr4lA1EEkSq3anovDxkE
    &client_id=y8xekb9h3e4s3s0
    &client_secret=19azsp1hnf3mk82
					</code>
				</pre>
				<p>Результат</p>
				<pre>
					<code class="hljs">
{
   "access_token": "OlhaH8T4wSAAAAAAAAAKrU5PxOT4QF1ZhgHdkUyXcYyeU45fiZtpBtqKWcElqMBX", 
    "token_type": "bearer", 
    "uid": "286996508", 
    "account_id": "dbid:AADPD-wy8PRAh3kxL3WKVH1yfeXeiwEMK8s"
}
					</code>
				</pre>
			</section>
			<section>
				<section>
					<h2>Метод account/info (GET)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Получение информации об аккаунте пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/<span class="highlight-blue">1</span>/account/info
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример</h3>
					<p>Request</p>
					<pre>
						<code class="hljs" data-trim>
https://api.dropboxapi.com/1/account/info
						</code>
					</pre>
					<p>Response</p>
					<pre>
						<code class="hljs" data-trim>
{
    "referral_link": "https://db.tt/rwlMtVVYGE",
    "display_name": "Maks Hladki", 
    "uid": 286996508, 
    "locale": "ru", 
    "email_verified": true, 
    "team": null, 
    "quota_info": {
        "datastores": 0, 
        "shared": 0, 
        "quota": 4966055936, 
        "normal": 4150711869
    }, 
    "country": "BY",
    "name_details": {
        "familiar_name": "Maks", 
        "surname": "Hladki",
        "given_name": "Maks"
    }, 
    "email": "makshladki@gmail.com"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод users/get_account (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Получение информации об аккаунте пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/users/get_account
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Тело запроса</h3>
					<pre>
						<code class="hljs">
{
    "account_id": "dbid:AADPD-wy8PRAh3kxL3WKVH1yfeXeiwEMK8s"
    //получаем account ID из метода авторизации
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример ответа</h3>
					<pre>
						<code class="hljs">
{
  "account_id": "dbid:AADPD-wy8PRAh3kxL3WKVH1yfeXeiwEMK8s",
  "name": {
    "given_name": "Maks",
    "surname": "Hladki",
    "familiar_name": "Maks",
    "display_name": "Maks Hladki",
    "abbreviated_name": "MH"
  },
  "email": "makshladki@gmail.com",
  "email_verified": true,
  "disabled": false,
  "is_teammate": true
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод users/get_space_usage (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Получение информации об использованном пространстве
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/users/get_space_usage
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример ответа</h3>
					<pre>
						<code class="hljs">	
{
  "used": 4027359013,
  //использованное пространство
  "allocation": {
    ".tag": "individual",
    "allocated": 6039797760
    //выделенное пространство
  }
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/copy (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Копирование папки с файлами либо отдельного файла в облачном пространстве пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/copy
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример с папкой</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs" data-trim>
{
    "from_path": "/DROPBOX_API/Test1",
    "to_path": "/DROPBOX_API/Test2",
    "allow_shared_folder": false,
    "autorename": false
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs" data-trim>
{
  ".tag": "folder",
  "name": "Test5",
  "path_lower": "/dropbox_api/test5",
  "path_display": "/DROPBOX_API/Test5",
  "id": "id:7yM4SdXIcWUAAAAAAAA9XQ"
}
						</code>
					</pre>
					<blockquote>
						Указывать нужно имя несуществующей папки, либо получим ошибку с конфиликтой ситуацией. Также можно использовать ключ autorename
					</blockquote>
				</section>
				<section>
					<h3>Пример с файлом</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
{
    "from_path": "/DROPBOX_API/Test1/Hello.txt",
    "to_path": "/DROPBOX_API/Test2/Hello.txt",
    "allow_shared_folder": false,
    "autorename": false
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  ".tag": "file",
  "name": "Hello.txt",
  "path_lower": "/dropbox_api/test2/hello.txt",
  "path_display": "/dropbox_api/Test2/Hello.txt",
  "id": "id:7yM4SdXIcWUAAAAAAAA6QA",
  "client_modified": "2017-02-09T07:29:05Z",
  "server_modified": "2017-02-09T07:41:08Z",
  "rev": "e12122995045",
  "size": 10,
  "content_hash": "b529610e864e4176d6b83e52237718da4ed1fe5dedff8ae3381df05343c7a059"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/create_folder (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Создает новую папку в облачном пространстве пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/create_folder
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
{
    "path": "/DROPBOX_API/Test3",
    "autorename": false
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">	
{
  "name": "Test3",
  "path_lower": "/dropbox_api/test3",
  "path_display": "/DROPBOX_API/Test3",
  "id": "id:7yM4SdXIcWUAAAAAAAA6QQ"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/delete (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Удаляет папку с файлами либо отдельный файл из облачного пространства пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/delete
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример с папкой</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
{
    "path": "/DROPBOX_API/Test1"
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  ".tag": "folder",
  "name": "Test1",
  "path_lower": "/dropbox_api/test1",
  "path_display": "/DROPBOX_API/Test1",
  "id": "id:7yM4SdXIcWUAAAAAAAA6OA"
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример с файлом</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
{
    "path": "/DROPBOX_API/Test1/Hello.txt"
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  ".tag": "file",
  "name": "Hello.txt",
  "path_lower": "/dropbox_api/test1/hello.txt",
  "path_display": "/dropbox_api/Test1/Hello.txt",
  "id": "id:7yM4SdXIcWUAAAAAAAA6Qw",
  "client_modified": "2017-02-09T07:29:05Z",
  "server_modified": "2017-02-09T19:35:09Z",
  "rev": "e12922995045",
  "size": 10,
  "content_hash": "b529610e864e4176d6b83e52237718da4ed1fe5dedff8ae3381df05343c7a059"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/download (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Скачивает файл из облачного пространства пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://content.dropboxapi.com/2/files/download
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Dropbox-API-Arg</td>
								<td>
									<pre>
										<code class="hljs">
{ 
	"path": "/DROPBOX_API/Test1/Hello.txt" 
}
										</code>
									</pre>
								</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример</h3>
					<p>
						Ответ
					</p>
					<pre>
						<code class="hljs">
HelloWorld
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/get_metadata (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Получает мета-информацию о файле либо папке
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/get_metadata
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs" data-trim>
{
    "path": "/DROPBOX_API/Test1/hello.txt",
    "include_media_info": true,
    "include_deleted": true,
    "include_has_explicit_shared_members": true
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs" data-trim>
{
  ".tag": "file",
  "name": "Hello.txt",
  "path_lower": "/dropbox_api/test1/hello.txt",
  "path_display": "/dropbox_api/Test1/Hello.txt",
  "id": "id:7yM4SdXIcWUAAAAAAAA6RA",
  "client_modified": "2017-02-09T07:29:05Z",
  "server_modified": "2017-02-09T19:38:15Z",
  "rev": "e12b22995045",
  "size": 10,
  "has_explicit_shared_members": false,
  "content_hash": "b529610e864e4176d6b83e52237718da4ed1fe5dedff8ae3381df05343c7a059"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/list_folder (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Получает список папок в облачном пространстве пользователя. Можно возвращать список по частям, используя метод list_folder/continue
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/list_folder
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример запроса</h3>
					<pre>
						<code class="hljs">
{
    "path": "/DROPBOX_API",
    "recursive": false,
    "include_media_info": true,
    "include_deleted": false,
    "include_has_explicit_shared_members": false
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример ответа</h3>
					<pre>
						<code class="hljs">
{
  "entries": [
    {
      ".tag": "folder",
      "name": "Test2",
      "path_lower": "/dropbox_api/test2",
      "path_display": "/DROPBOX_API/Test2",
      "id": "id:7yM4SdXIcWUAAAAAAAA6Pw"
    },
    {
      ".tag": "folder",
      "name": "Test3",
      "path_lower": "/dropbox_api/test3",
      "path_display": "/DROPBOX_API/Test3",
      "id": "id:7yM4SdXIcWUAAAAAAAA6QQ"
    },
    {
      ".tag": "folder",
      "name": "Test1",
      "path_lower": "/dropbox_api/test1",
      "path_display": "/DROPBOX_API/Test1",
      "id": "id:7yM4SdXIcWUAAAAAAAA6Qg"
    }
  ],
  "cursor": "AAH6SBV8IjdvO3vxr6XANeye-QhLaStlw-RFDSPR3hKrTpYCullmW_0llQMwkjhXAzkNFL8WZU2rJZsqtJL89NmmlbxWZR2FFh9bM_HxWtXKzqNVyRRochEqS3ybm8tnLeNpKNov6ejDs23dCOr_nwDoO9YXN0uM72JoAvZI60LVug",
  "has_more": false
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/move (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Перемещает папку либо отдельный файл в облачном пространстве пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/move
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример с папкой</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">	
{
    "from_path": "/DROPBOX_API/Test1",
    "to_path": "/DROPBOX_API/Test4",
    "allow_shared_folder": false,
    "autorename": false
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  ".tag": "folder",
  "name": "Test4",
  "path_lower": "/dropbox_api/test4",
  "path_display": "/DROPBOX_API/Test4",
  "id": "id:7yM4SdXIcWUAAAAAAAA6Qg"
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример с файлом</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
{
    "from_path": "/DROPBOX_API/Test1/hello.txt",
    "to_path": "/DROPBOX_API/Test4/word.txt",
    "allow_shared_folder": false,
    "autorename": false
}
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  ".tag": "file",
  "name": "word.txt",
  "path_lower": "/dropbox_api/test4/word.txt",
  "path_display": "/DROPBOX_API/Test4/word.txt",
  "id": "id:7yM4SdXIcWUAAAAAAAA6RA",
  "client_modified": "2017-02-09T07:29:05Z",
  "server_modified": "2017-02-09T20:10:15Z",
  "rev": "e13522995045",
  "size": 10,
  "content_hash": "b529610e864e4176d6b83e52237718da4ed1fe5dedff8ae3381df05343c7a059"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/search (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Поиск по файлам и папкам
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/search
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример запроса</h3>
					<pre>
						<code class="hljs">
{
    "path": "",
    "query": ".pptx",
    "start": 0,
    "max_results": 100,
    "mode": "filename"
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример ответа</h3>
					<pre>
						<code class="hljs">
{
  "matches": [
    {
      "match_type": {
        ".tag": "filename"
      },
      "metadata": {
        ".tag": "file",
        "name": "SEAL.pptx",
        "path_lower": "/seal.pptx",
        "path_display": "/SEAL.pptx",
        "id": "id:7yM4SdXIcWUAAAAAAAAdbw",
        "client_modified": "2013-09-24T13:23:13Z",
        "server_modified": "2014-06-17T17:40:12Z",
        "rev": "35c822995045",
        "size": 67791,
        "content_hash": "b7287ea65b8aa5a1bd6c17340adf325120235ce34404a614920ce7ff24b953e6"
      }
    },
    {
      "match_type": {
        ".tag": "filename"
      },
      "metadata": {
        ".tag": "file",
        "name": "Презентация Гладкий М.В.pptx",
        "path_lower": "/диплом/гладкий/презентация гладкий м.в.pptx",
        "path_display": "/диплом/Гладкий/Презентация Гладкий М.В.pptx",
        "id": "id:7yM4SdXIcWUAAAAAAAAfHA",
        "client_modified": "2014-06-14T10:08:45Z",
        "server_modified": "2014-12-29T19:34:03Z",
        "rev": "4d9f22995045",
        "size": 283120,
        "content_hash": "5f2b050e402ce134e8e8f8f2c6eae41dad9e1b0ba26a1783712fdb7b881a2329"
      }
    },
    {
      "match_type": {
        ".tag": "filename"
      },
      "metadata": {
        ".tag": "file",
        "name": "Гладкий М.В Безопасность приложений в облаках.pptx",
        "path_lower": "/магистратура/конференция нтк/гладкий м.в безопасность приложений в облаках.pptx",
        "path_display": "/магистратура/Конференция НТК/Гладкий М.В Безопасность приложений в облаках.pptx",
        "id": "id:7yM4SdXIcWUAAAAAAAAgVw",
        "client_modified": "2015-02-03T20:54:43Z",
        "server_modified": "2015-02-03T21:26:09Z",
        "rev": "506222995045",
        "size": 94082,
        "content_hash": "f77daa01e712960e747925f825fedda601857414e9cd623d443c9f208cf49f4f"
      }
    },
    {
      "match_type": {
        ".tag": "filename"
      },
      "metadata": {
        ".tag": "file",
        "name": "Презентация Гладкий М.В. Безопасность прил. на пл обл техн.pptx",
        "path_lower": "/кафедра/лекция ов/презентация гладкий м.в. безопасность прил. на пл обл техн.pptx",
        "path_display": "/кафедра/Лекция ОВ/Презентация Гладкий М.В. Безопасность прил. на пл обл техн.pptx",
        "id": "id:7yM4SdXIcWUAAAAAAAAvYg",
        "client_modified": "2015-10-28T21:17:22Z",
        "server_modified": "2015-10-29T19:34:56Z",
        "rev": "807222995045",
        "size": 566338,
        "content_hash": "8318e4bccdf8b9ec951616713b25fc46527214c450cc667af75061dc548207c7"
      }
    },
    {
      "match_type": {
        ".tag": "filename"
      },
      "metadata": {
        ".tag": "file",
        "name": "Big data - введение.pptx",
        "path_lower": "/аспирантура/big data - введение.pptx",
        "path_display": "/Аспирантура/Big data - введение.pptx",
        "id": "id:sly7Bx5cS5AAAAAAAAAAAQ",
        "client_modified": "2016-02-08T21:04:27Z",
        "server_modified": "2016-02-08T21:04:31Z",
        "rev": "8b6e22995045",
        "size": 1550326,
        "content_hash": "5869659ddb1f9061e7cc23e57c422bcc426ebe597bdcda668d6296a9de66d26d"
      }
    },
    {
      "match_type": {
        ".tag": "filename"
      },
      "metadata": {
        ".tag": "file",
        "name": "Big data - введение.pptx",
        "path_lower": "/аспирантура/2016/wordcount/big data - введение.pptx",
        "path_display": "/аспирантура/2016/WordCount/Big data - введение.pptx",
        "id": "id:7yM4SdXIcWUAAAAAAAA2wQ",
        "client_modified": "2016-09-15T18:32:32Z",
        "server_modified": "2016-09-15T18:32:38Z",
        "rev": "da0422995045",
        "size": 1027383,
        "content_hash": "7b654eba13c9944920a65368c8b23e8dc157767b0a0f7d0506db8794ef8d8baa"
      }
    }
  ],
  "more": false,
  "start": 6
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод files/upload (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Загрузка файла в облачное хранилище
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/files/search
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/octet-stream</td>
							</tr>
							<tr>
								<td colspan="2">Добавление файла</td>
							</tr>
							<tr>
								<td>Dropbox-API-Arg</td>
								<td>
									<pre>
									<code class="hljs" data-trim>
{ 
	"path": "/DROPBOX_API/Test4/lorem.txt", 
	"mode": "add", 
	"autorename": true, 
	"mute": false 
}
									</code>
								</pre>
								</td>
							</tr>
							<tr>
								<td colspan="2">Перезапись файла</td>
							</tr>
							<tr>
								<td>Dropbox-API-Arg</td>
								<td>
									<pre>
									<code class="hljs" data-trim>
{ 
	"path": "/DROPBOX_API/Test4/lorem.txt", 
	"mode": "overwrite", 
	"autorename": true, 
	"mute": false 
}
									</code>
								</pre>
								</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример добавления</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry.
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
when an unknown printer took a galley of type and scrambled it to make a type specimen book. 
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  "name": "lorem.txt",
  "path_lower": "/dropbox_api/test4/lorem.txt",
  "path_display": "/DROPBOX_API/Test4/lorem.txt",
  "id": "id:7yM4SdXIcWUAAAAAAAA6Rg",
  "client_modified": "2017-02-10T05:30:11Z",
  "server_modified": "2017-02-10T05:30:11Z",
  "rev": "e13722995045",
  "size": 268,
  "content_hash": "73c51b032ae5c3524a9f8ffaed07769196a76e9fa5887803b17536007f0f55cc"
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример перезаписи</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, 
adipisci velit..."
"There is no one who loves pain itself, who seeks after it and wants to have it, 
simply because it is pain..."
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
{
  "name": "lorem.txt",
  "path_lower": "/dropbox_api/test4/lorem.txt",
  "path_display": "/DROPBOX_API/Test4/lorem.txt",
  "id": "id:7yM4SdXIcWUAAAAAAAA6Rg",
  "client_modified": "2017-02-10T05:37:56Z",
  "server_modified": "2017-02-10T05:37:56Z",
  "rev": "e13822995045",
  "size": 208,
  "content_hash": "1f78df6fc81563e65aea9e3fa6af9130483647bde00482f2ff4fb0f6aa987b72"
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод sharing/create_shared_link_with_settings (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						"Расширивает" файл либо папку, используя дополнительные параметры
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/sharing/create_shared_link_with_settings
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример запроса</h3>
					<pre>
						<code class="hljs">
{
    "path": "/DROPBOX_API/Test4/lorem.txt",
    "settings": {
        "requested_visibility": "public"
    }
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример ответа</h3>
					<pre>
						<code class="hljs">	
{
  ".tag": "file",
  "url": "https://www.dropbox.com/s/8arwubaeu9odavx/lorem.txt?dl=0",
  "id": "id:7yM4SdXIcWUAAAAAAAA6Rg",
  "name": "lorem.txt",
  "path_lower": "/dropbox_api/test4/lorem.txt",
  "link_permissions": {
    "resolved_visibility": {
      ".tag": "public"
    },
    "requested_visibility": {
      ".tag": "public"
    },
    "can_revoke": true
  },
  "client_modified": "2017-02-10T05:37:56Z",
  "server_modified": "2017-02-10T05:37:56Z",
  "rev": "e13822995045",
  "size": 208
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод sharing/list_shared_links (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Получение ссылок на "расшаренные" ресурсы пользователя
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/sharing/list_shared_links
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример запроса</h3>
					<pre>
						<code class="hljs">
{
    //можно оставить пустым
    //"path": "/DROPBOX_API/Test1"
    //"path": "rev:a1c10ce0dd78"
    //"cursor": "ZtkX9_EHj3x7PMkVuFIhwKYXEpwpLwyxp9vMKomUhllil9q7eWiAu"
}
						</code>
					</pre>
				</section>
				<section>
					<h3>Пример ответа</h3>
					<pre>
						<code class="hljs" data-trim>
{
  "links": [
    {
      ".tag": "file",
      "url": "https://www.dropbox.com/s/8arwubaeu9odavx/lorem.txt?dl=0",
      "id": "id:7yM4SdXIcWUAAAAAAAA6Rg",
      "name": "lorem.txt",
      "path_lower": "/dropbox_api/test4/lorem.txt",
      "link_permissions": {
        "resolved_visibility": {
          ".tag": "public"
        },
        "requested_visibility": {
          ".tag": "public"
        },
        "can_revoke": true
      },
      "client_modified": "2017-02-10T05:37:56Z",
      "server_modified": "2017-02-10T05:37:56Z",
      "rev": "e13822995045",
      "size": 208
    },
  ],
  "has_more": false
}
						</code>
					</pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Метод sharing/revoke_shared_link (POST)</h2>
				</section>
				<section>
					<h3>Определение</h3>
					<blockquote>
						Отменяет действие ссылки на ресурс
					</blockquote>
					<h3>ULR</h3>
					<blockquote>
						https://api.dropboxapi.com/2/sharing/revoke_shared_link
					</blockquote>
				</section>
				<section>
					<h3>Заголовки</h3>
					<table>
						<thead>
							<tr>
								<th>Ключ</th>
								<th>Значение</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Authorization</td>
								<td>Bearer OlhaH8T4wSAAAA...</td>
							</tr>
							<tr>
								<td>Content-Type</td>
								<td>application/json</td>
							</tr>
						</tbody>
					</table>
				</section>
				<section>
					<h3>Пример</h3>
					<p>Тело запроса</p>
					<pre>
						<code class="hljs">
{
    "url": "https://www.dropbox.com/sh/dn8b4szbscdeabw/AABpOrfr3Sdm-9Tjc76xqIkHa?dl=0"
}				
						</code>
					</pre>
					<p>Ответ</p>
					<pre>
						<code class="hljs">
null
						</code>
					</pre>
				</section>
			</section>
			<section>
				<h3>Пример кодов ошибок</h3>
				<small>
				<table>
					<thead>
						<tr>
							<th>Код</th>
							<th>Описание</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>400</td>
							<td>Неправильный входящий параметр, в сообщении приводится подробная информация</td>
						</tr>
						<tr>
							<td>401</td>
							<td>Неправильный или истекший по времени токен. Необходимо повторно произвести процесс аутентификации</td>
						</tr>
						<tr>
							<td>403</td>
							<td>Неправильный запрос (неверный ключ, истекшее время действие токена и т.д.)</td>
						</tr>
						<tr>
							<td>404</td>
							<td>Файл или папка не найлден(а) по указанному пути</td>
						</tr>
						<tr>
							<td>405</td>
							<td>Неправильный метод запроса (например, вместо POST нужно использовать GET)</td>
						</tr>
						<tr>
							<td>429</td>
							<td>Приложение посылает слишком много запросов, поэтому временно установлен лимит</td>
						</tr>
						<tr>
							<td>507</td>
							<td>Пользователь достиг квоты свободного пространства</td>
						</tr>
						<tr>
							<td>5xx</td>
							<td>Ошибка на сервере Dropbox</td>
						</tr>
					</tbody>
				</table>
				</small>
			</section>
			<section>
				<h2 class="header-hide">Спасибо за внимание</h2>
				<img src="img/thanks.png" alt="" height="600">
			</section>
		</div>
	</div>
	<aside id="presentable-icon" class="revealjs">
		<a title="Содержание лекции" href="#/0/1">
			<i class="fa fa-list-ul fa-2x"></i>
		</a>
	</aside>
	<script src="../../js/bundle.min.js"></script>
</body>

</html>